import{_ as I}from"./C4VXNApb.js";import{h as K,r as u,j as E,f as O,o as c,c as v,b as t,a as s,w as r,m as a,s as N,x as P,y as _,_ as b,d as m,q as y,X as j,D as z,P as F}from"./54tIwAh0.js";import{_ as C,F as G}from"./DtTGpoaK.js";import{_ as k}from"./DOJb3cK_.js";import{_ as S}from"./B9j0vBJp.js";import{c as D,a as x}from"./BqjAheMm.js";import{u as H}from"./BuRy2gyZ.js";import"./Bd8hejFT.js";import"./CUn-cLLW.js";const U=D({title:x().required("Event title required").min(5,"Title should be at least 5 characters long"),address:x().required("Event address required"),country:x().required("Event country required"),state:x().required("Event state required")}),Y=["Abia","Adamawa","Akwa Ibom","Anambra","Bauchi","Bayelsa","Benue","Borno","Cross River","Delta","Ebonyi","Edo","Ekiti","Enugu","FCT - Abuja","Gombe","Imo","Jigawa","Kaduna","Kano","Katsina","Kebbi","Kogi","Kwara","Lagos","Nasarawa","Niger","Ogun","Ondo","Osun","Oyo","Plateau","Rivers","Sokoto","Taraba","Yobe","Zamfara"],L=()=>({all_countries:["Nigeria"],nigerian_states:Y}),M={class:"container pt-4 pb-20"},J={class:"max-w-full w-[640px] mx-auto mt-10"},W={class:"flex flex-col sm:flex-row gap-4 w-full"},X={key:0,class:"bg-white/5 rounded-2xl p-4 !mt-8 border animate-in slide-in-from-top-1 animate-out fade-in-0"},Z={class:"my-4 space-y-4"},Q={key:0,class:"flex justify-between items-center"},ee={key:1,class:"flex justify-between items-center"},te={key:0,class:"py-1 px-2 mt-8 border border-destructive bg-[#64200A] flex items-center rounded-md justify-between"},pe=K({__name:"create-event",setup(ae){const{all_countries:V,nigerian_states:q}=L(),o=u(void 0),l=u(100),i=u(100),h=u(!0),A=E(()=>!o.value||Number(l.value)<0||Number(i.value)<0),f=u(!1),p=u(!1),T=E(()=>{switch(o.value){case"both":return[{name:"song",price:p.value?0:Number(l.value)},{name:"hype",price:p.value?0:Number(i.value)}];case"hype":return[{name:"hype",price:p.value?0:Number(i.value)}];case"song":return[{name:"song",price:p.value?0:Number(l.value)}];default:return[]}}),{$repo:{event:R}}=O(),B=async w=>{var g;const e={...w,types:T.value};try{f.value=!0;const n=await R.createEvent(e);f.value=!1,N({title:n.message,variant:"normal"}),n.data.id&&P("/dashboard")}catch(n){f.value=!1,N({title:((g=n.data)==null?void 0:g.message)??"Failed to create event",variant:"warning"}),console.error("FAILED TO CREATE EVENT",n)}};return H({title:"Create Event"}),(w,e)=>{const g=I,n=z,$=F;return c(),v("div",M,[t(g,{to:"/dashboard"}),e[13]||(e[13]=s("div",{class:"text-3xl md:text-4xl text-center font-semibold font-display"}," Create event ",-1)),s("div",J,[t(a(G),{class:"space-y-6","validation-schema":a(U),onSubmit:B},{default:r(()=>[t(C,{name:"title",placeholder:"Enter event title",label:"Event title"}),t(C,{name:"address",placeholder:"Enter event address",label:"Address"}),s("div",W,[t(k,{options:a(V),name:"country",placeholder:"Choose event country",label:"Country",class:"w-full"},null,8,["options"]),t(k,{options:a(q),name:"state",placeholder:"Choose event state",label:"State",class:"w-full"},null,8,["options"])]),s("div",null,[e[7]||(e[7]=s("div",{class:"mb-3 font-medium"}," What type of request are you taking ",-1)),t($,{class:"grid grid-cols-2 sm:grid-cols-3 gap-4 text-muted-foreground",name:"type",required:"",modelValue:a(o),"onUpdate:modelValue":e[0]||(e[0]=d=>_(o)?o.value=d:null)},{default:r(()=>[t(n,{"as-child":"",value:"song"},{default:r(()=>[t(b,{type:"button",variant:"outline",size:"lg",class:"ring-transparent bg-white/5 transition-colors ring-[1px] data-[state='checked']:ring-primary"},{default:r(()=>e[4]||(e[4]=[m(" Song ")])),_:1})]),_:1}),t(n,{"as-child":"",value:"hype"},{default:r(()=>[t(b,{type:"button",variant:"outline",size:"lg",class:"ring-transparent bg-white/5 transition-colors ring-[1px] data-[state='checked']:ring-primary"},{default:r(()=>e[5]||(e[5]=[m(" Hype ")])),_:1})]),_:1}),t(n,{"as-child":"",value:"both"},{default:r(()=>[t(b,{type:"button",variant:"outline",size:"lg",class:"col-span-2 sm:col-span-1 bg-white/5 ring-transparent transition-colors ring-[1px] data-[state='checked']:ring-primary"},{default:r(()=>e[6]||(e[6]=[m(" Song & Hype ")])),_:1})]),_:1})]),_:1},8,["modelValue"])]),a(o)&&!a(p)?(c(),v("div",X,[e[11]||(e[11]=s("div",{class:"text-sm text-muted-foreground"}," Set your starting prices ",-1)),s("div",Z,[a(o)=="both"||a(o)=="song"?(c(),v("div",Q,[e[8]||(e[8]=s("div",{class:"text-2xl font-semibold"},[m(" Song "),s("span",{class:"hidden sm:inline"},"request")],-1)),t(S,{modelValue:a(l),"onUpdate:modelValue":e[1]||(e[1]=d=>_(l)?l.value=d:null),id:"SONG_PRICE",step:100},null,8,["modelValue"])])):y("",!0),a(o)=="both"||a(o)=="hype"?(c(),v("div",ee,[e[9]||(e[9]=s("div",{class:"text-2xl font-semibold"},[m(" Hype "),s("span",{class:"hidden sm:inline"},"request")],-1)),t(S,{modelValue:a(i),"onUpdate:modelValue":e[2]||(e[2]=d=>_(i)?i.value=d:null),id:"HYPE_PRICE",step:100},null,8,["modelValue"])])):y("",!0)]),a(h)?(c(),v("div",te,[e[10]||(e[10]=s("div",{class:"text-sm sm:text-base"}," You can always change the price at any time during the event ",-1)),t(a(j),{class:"size-4 cursor-pointer",onClick:e[3]||(e[3]=d=>h.value=!1)})])):y("",!0)])):y("",!0),t(b,{class:"max-w-full w-[450px] !flex !mt-8 mx-auto border",size:"lg",disabled:a(A),loading:a(f)},{default:r(()=>e[12]||(e[12]=[m(" Create event ")])),_:1},8,["disabled","loading"])]),_:1},8,["validation-schema"])])])}}});export{pe as default};
