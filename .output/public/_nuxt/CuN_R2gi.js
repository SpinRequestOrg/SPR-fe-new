import{_ as ie}from"./B4M3g5MA.js";import{a as le}from"./DQ58iMwX.js";import{_ as re}from"./CZ3-iNoy.js";import{_ as de}from"./DPZPngfM.js";import{_ as B}from"./DlDWhlZT.js";import{_ as ce}from"./RlclGc01.js";import{_ as te}from"./M6jX-MO5.js";import{h as z,i as A,o as d,c as u,a as e,b as r,B as q,m as t,C as R,n as f,t as i,K as ue,a8 as me,j as F,q as y,F as pe,E as _e,k as fe,f as ge,w as p,_ as E,d as S,an as ve}from"./bxmSTM4p.js";import{D as ee}from"./BoUYCQBg.js";import{_ as ye}from"./CIqiVcPo.js";import{u as he}from"./DsQ42j_F.js";import{u as xe}from"./NZmLVfKA.js";import"./DCkb20XM.js";const $e={class:"flex gap-1 items-center"},be={class:"space-y-1"},qe={key:1,class:"flex items-center gap-2 text-base"},ke={class:"text-foreground font-medium"},we={class:"text-muted-foreground"},Ee={class:"flex items-center text-muted-foreground"},Se={class:"flex items-center gap-1 text-primary-foreground"},Fe={class:"text-primary-foreground font-medium"},Re={class:"text-muted-foreground text-sm"},Ie={key:0,class:"text-primary text-sm"},Ne={key:1,class:"text-muted-foreground text-sm"},Be=z({__name:"request-item",props:{type:{default:"song"},request:{}},setup(I){const{authEmail:_}=A(),n=me("size-16 scale-75  shrink-0 rounded-full grid place-items-center",{variants:{type:{song:"bg-[#FFEE99]/10",hype:"bg-[#FF99F1]/10"}},defaultVariants:{type:"song"}});return(o,c)=>{const l=B,g=te;return d(),u("div",$e,[e("div",{class:q(t(n)({type:o.type}))},[r(l,{name:o.type=="song"?"music":"mic",class:q(("cn"in o?o.cn:t(R))(o.request.status==="now-playing"?"animate-bounce":""))},null,8,["name","class"])],2),e("div",be,[o.request.type==="hype"?(d(),f(g,{key:0,content:o.request.description,class:"font-medium"},null,8,["content"])):(d(),u("div",qe,[e("div",ke,i(o.request.song_title),1),e("div",we,"by "+i(o.request.artist),1)])),e("div",Ee,[e("div",Se,[r(l,{name:"money"}),e("div",Fe," â‚¦"+i(("formatMoney"in o?o.formatMoney:t(ue))(o.request.price)),1)]),r(t(ee)),e("div",Re,i(o.request.type=="hype"?"HYPE":"SONG"),1),r(t(ee)),t(_)===o.request.audience.email?(d(),u("div",Ie," Your request ")):(d(),u("div",Ne," From "+i(o.request.nickname??o.request.audience.name),1))])])])}}}),ze={class:"w-full rounded-xl relative"},Ae={class:"py-4 px-6 bg-[#1C1B1F] rounded-t-[inherit]"},Le={class:"flex items-center gap-4 text-muted-foreground text-sm -ml-1"},Ce={class:"flex items-center gap-px"},Me={class:"flex items-center gap-px"},Te={class:"relative px-6 py-8 bg-white/5 rounded-b-[inherit]"},Ue={class:"space-y-1 grid justify-center text-center mb-8 relative z-[3]"},De={key:1,class:"text-sm text-muted-foreground"},Pe={key:0,class:"p-1 absolute -translate-y-4 left-0 right-0 text-center text-background font-medium text-sm bg-gradient-to-r from-[#844AFF] from-[1.28%] via-[#E991DD] via-[58.26%] to-[#FCF0AF] to-[100%]"},Ve={key:1,class:"space-y-6"},je={key:2,class:"p-3 text-center grid place-items-center"},Oe=z({__name:"request-queue.card",props:{event:{}},setup(I){const _=I,{authEmail:n}=A(),o=F(()=>_.event.requests.find(c=>c.status==="now-playing"));return(c,l)=>{var w,s,a,m;const g=B,N=ce,k=Be;return d(),u("div",ze,[e("div",Ae,[l[0]||(l[0]=e("div",{class:"font-display font-semibold text-2xl mb-2"},"Request Queue",-1)),e("div",Le,[e("div",Ce,[r(g,{name:"celebration",class:"relative scale-75"}),e("div",null,i(c.event.title),1)]),e("div",Me,[r(g,{name:"location",class:"relative scale-75"}),e("div",null,i(c.event.address),1)])])]),e("div",Te,[l[1]||(l[1]=e("div",{class:"bg-sp-purple/50 blur-[200px] size-56 absolute left-1/2 -translate-x-1/2"},null,-1)),e("div",Ue,[r(N,{src:"/images/disco.png",class:q(("cn"in c?c.cn:t(R))("size-[120px] mx-auto",t(o)&&"animate-spin"))},null,8,["class"]),t(o)?(d(),f(te,{key:0,class:"font-semibold text-base",content:((w=t(o))==null?void 0:w.type)==="hype"?(s=t(o))==null?void 0:s.description:((a=t(o))==null?void 0:a.song_title)??""},null,8,["content"])):y("",!0),t(o)?(d(),u("div",De," Now "+i(t(o).type==="song"?"playing":"performing hype")+"... ",1)):y("",!0)]),t(o)&&t(n)===t(o).audience.email?(d(),u("div",Pe,i(t(o).type==="hype"?"Performing":"Playing")+" your "+i((m=t(o))==null?void 0:m.type)+" request ",1)):y("",!0),e("div",{class:q(("cn"in c?c.cn:t(R))("text-muted-foreground mb-4",t(o)&&t(n)===t(o).audience.email&&"mt-16"))}," PREVIOUS REQUESTS ",2),c.event.requests.length?(d(),u("div",Ve,[(d(!0),u(pe,null,_e(c.event.requests,h=>(d(),f(k,{key:h.id,request:h,type:h.type},null,8,["request","type"]))),128))])):(d(),u("div",je," No requests yet, hang tight "))])])}}}),Qe={class:"container pt-6 pb-20"},Ye={key:0,class:"grid grid-cols-1 md:grid-cols-[1fr_400px] justify-between gap-6 mt-10"},Ge={class:"grid lg:grid-cols-[auto_1fr] items-start gap-4"},He={class:"py-2"},Je={class:"font-display text-3xl md:text-4xl font-semibold"},Ke={class:"flex flex-wrap gap-4 items-center my-4 mb-6"},We={class:"flex items-center gap-2"},Xe={class:"flex items-center gap-1"},Ze={class:"font-semibold"},et={class:"flex items-center gap-2"},tt={class:"flex items-center gap-1"},st={class:"font-semibold"},at={class:"flex items-center gap-2"},ot={class:"flex items-center gap-1"},nt={class:"font-semibold"},it={class:"flex items-center gap-2"},lt={class:"flex items-center gap-1"},rt={class:"font-semibold"},dt={class:"flex flex-col md:flex-row items-center gap-4"},ct={class:"mt-10 space-y-2 text-muted-foreground hidden md:block"},ut={class:"max-w-[550px]"},mt={class:"inline-flex bg-white/10 items-center rounded-xl py-4 px-6 gap-4"},pt={class:"text-lg font-semibold text-foreground"},_t={class:"mt-4 space-y-4 text-muted-foreground md:hidden"},ft={class:"max-w-[550px]"},gt={class:"inline-flex bg-white/10 items-center rounded-xl py-4 px-6 gap-4"},vt={class:"text-lg font-semibold text-foreground"},Nt=z({__name:"index",setup(I){const _=fe(),{data:n,error:o,status:c}=he(`/user/host/${_.params.host}`),l=F(()=>{var s,a;return(a=(s=n==null?void 0:n.value)==null?void 0:s.data)==null?void 0:a.user}),{authEmail:g}=A(),N=F(()=>{var s,a,m;return(m=(a=(s=n.value)==null?void 0:s.data)==null?void 0:a.live_event)==null?void 0:m.requests}),k=F(()=>{var s;return(s=N.value)==null?void 0:s.some(a=>a.audience.email===g.value)}),{$config:{public:{APP_BASE_URL:w}}}=ge();return xe({title:()=>{var s;return`${(s=l.value)==null?void 0:s.stage_name}`},ogTitle:()=>{var s,a;return`${((s=n.value)==null?void 0:s.data.live_event.title)??""} | ${((a=l.value)==null?void 0:a.stage_name)??""}`},ogDescription:()=>"Make your requests and take spotlight of this event",ogImage:()=>{var s;return`${((s=l.value)==null?void 0:s.profile_picture)??"https://cdn.pixabay.com/photo/2018/05/10/11/34/concert-3387324_1280.jpg"}`},ogImageAlt:()=>"Live Event",ogImageSecureUrl:()=>{var s;return`${((s=l.value)==null?void 0:s.profile_picture)??"https://cdn.pixabay.com/photo/2018/05/10/11/34/concert-3387324_1280.jpg"}`},twitterImage:()=>{var s;return`${((s=l.value)==null?void 0:s.profile_picture)??"https://cdn.pixabay.com/photo/2018/05/10/11/34/concert-3387324_1280.jpg"}`},twitterTitle:()=>{var s,a;return`${((s=n.value)==null?void 0:s.data.live_event.title)??""} | ${((a=l.value)==null?void 0:a.stage_name)??""}`},ogType:"article",ogUrl:()=>{var s;return`${w}/${((s=l.value)==null?void 0:s.slug)??""}`},ogSiteName:"SpinRequest"}),(s,a)=>{var L,C,M,T,U;const m=ie,h=le,se=re,ae=de,v=B,oe=Oe,ne=ye;return d(),u("div",Qe,[(L=t(n))!=null&&L.data.live_event?(d(),f(h,{key:0,class:"-translate-y-6",user:"audience","start-date":(T=(M=(C=t(n))==null?void 0:C.data)==null?void 0:M.live_event)==null?void 0:T.start_date,animate:""},{default:p(()=>{var x,$,b;return[r(m,{to:`/${t(_).params.host}/${(b=($=(x=t(n))==null?void 0:x.data)==null?void 0:$.live_event)==null?void 0:b.id}/make-a-request`},{default:p(()=>[r(E,null,{default:p(()=>[S(" Make "+i(t(k)?"another":"a")+" request ",1)]),_:1})]),_:1},8,["to"])]}),_:1},8,["start-date"])):y("",!0),r(se,{to:"/search",class:q(("cn"in s?s.cn:t(R))((U=t(n))!=null&&U.data.live_event?"mt-10":""))},null,8,["class"]),r(ne,{loading:t(c)==="pending",error:t(o)},{default:p(()=>{var x,$,b,D,P,V,j,O,Q,Y,G,H,J,K,W,X,Z;return[t(l)?(d(),u("div",Ye,[e("div",null,[e("div",Ge,[r(ae,{class:"!size-[120px] md:!size-[180px] xl:!size-[200px] !rounded-3xl !text-4xl",initials:("getInitials"in s?s.getInitials:t(ve))((x=t(l))==null?void 0:x.stage_name),image:t(l).profile_picture},null,8,["initials","image"]),e("div",He,[e("div",Je,i(t(l).stage_name),1),e("div",Ke,[e("div",We,[r(v,{name:"account_circle"}),e("div",Xe,[e("span",Ze,i((D=(b=($=t(n))==null?void 0:$.data)==null?void 0:b.total_followers)==null?void 0:D.length),1),a[0]||(a[0]=e("span",{class:"text-muted-foreground"},"FOLLOWERS",-1))])]),e("div",et,[r(v,{name:"celebration"}),e("div",tt,[e("span",st,i((P=t(n))==null?void 0:P.data.total_events),1),a[1]||(a[1]=e("span",{class:"text-muted-foreground"},"EVENTS",-1))])]),e("div",at,[r(v,{name:"genres"}),e("div",ot,[e("span",nt,i((V=t(n))==null?void 0:V.data.total_requests),1),a[2]||(a[2]=e("span",{class:"text-muted-foreground"},"REQUESTS",-1))])]),e("div",it,[r(v,{name:"genres"}),e("div",lt,[e("span",rt,i((j=t(n))==null?void 0:j.data.total_fulfilled_requests),1),a[3]||(a[3]=e("span",{class:"text-muted-foreground"},"FUFILLED",-1))])])]),e("div",dt,[r(E,{variant:"secondary",class:"w-full md:w-auto",size:"lg"},{default:p(()=>a[4]||(a[4]=[S(" Follow ")])),_:1}),(O=t(n))!=null&&O.data.live_event?(d(),f(m,{key:0,to:`/${t(_).params.host}/${(G=(Y=(Q=t(n))==null?void 0:Q.data)==null?void 0:Y.live_event)==null?void 0:G.id}/make-a-request`,class:"w-full md:w-auto"},{default:p(()=>[r(E,{size:"lg",class:"w-full"},{default:p(()=>[S(" Make "+i(t(k)?"another":"a")+" request ",1)]),_:1})]),_:1},8,["to"])):(d(),f(E,{key:1,class:"w-full md:w-auto",size:"lg"},{default:p(()=>a[5]||(a[5]=[S(" Notify me when DJ goes live ")])),_:1}))])])]),e("div",ct,[a[7]||(a[7]=e("div",null,"ABOUT ME",-1)),e("div",ut,i(t(l).bio),1),e("div",mt,[r(v,{name:"badge"}),e("div",null,[e("div",pt,i((H=t(n))==null?void 0:H.data.total_fulfilled_requests)+" of "+i((J=t(n))==null?void 0:J.data.total_requests),1),a[6]||(a[6]=e("div",{class:"text-muted-foreground"},"Request fufilled",-1))])])])]),(K=t(n))!=null&&K.data.live_event?(d(),f(oe,{key:0,event:(W=t(n))==null?void 0:W.data.live_event},null,8,["event"])):y("",!0),e("div",_t,[a[9]||(a[9]=e("div",null,"ABOUT ME",-1)),e("div",ft,i(t(l).bio),1),e("div",gt,[r(v,{name:"badge"}),e("div",null,[e("div",vt,i((X=t(n))==null?void 0:X.data.total_fulfilled_requests)+" of "+i((Z=t(n))==null?void 0:Z.data.total_requests),1),a[8]||(a[8]=e("div",{class:"text-muted-foreground"},"Request fufilled",-1))])])])])):y("",!0)]}),_:1},8,["loading","error"])])}}});export{Nt as default};
