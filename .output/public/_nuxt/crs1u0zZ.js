import{_ as R}from"./CqOvMmf1.js";import{_ as w,F as S}from"./a5Z8Toz9.js";import{y as b,u as C,r as k,A as B,o as f,c as E,b as r,a as i,w as _,_ as N,B as e,C as F,D as P,t as $,x,E as A}from"./D5arO9F3.js";import{R as D}from"./h_O2H-HD.js";import{L as T}from"./BnxuoDm3.js";import"./Ccavnmjg.js";import"./B_TM8TBb.js";import"./BqjAheMm.js";const V={class:"container pt-8"},q={class:"w-[400px] max-w-full mx-auto"},J=b({__name:"reset-password",setup(z){var d,c;const{$repo:{auth:g}}=C(),a=k(!1),t=B(),m=(d=t==null?void 0:t.query)==null?void 0:d.token,y=decodeURIComponent((c=t==null?void 0:t.query)==null?void 0:c.email),h=async({password:p,password_confirmation:o})=>{var n,u;try{const s={password:p,password_confirmation:o,token:m,email:y};a.value=!0;const l=await g.resetPassword(s),v=l==null?void 0:l.message;x({title:"Success",description:v,variant:"normal"}),A().push("/login"),a.value=!1}catch(s){a.value=!1,x({title:"Failed",description:((n=s==null?void 0:s.data)==null?void 0:n.message)??"Failed to send reset link",variant:"warning"}),console.error("ERROR RESETTING PASSWORD",(u=s==null?void 0:s.data)==null?void 0:u.message)}};return(p,o)=>{const n=R;return f(),E("div",V,[r(n,{to:"/login"}),o[0]||(o[0]=i("div",{class:"text-4xl lg:text-5xl font-semibold my-4 text-center max-w-[595px] mx-auto"}," Change password ",-1)),o[1]||(o[1]=i("div",{class:"text-muted-foreground text-center mb-6"}," Create a new password ",-1)),i("div",q,[r(e(S),{"validation-schema":e(D),onSubmit:h,class:"space-y-8"},{default:_(()=>[r(w,{type:"password",name:"password",placeholder:"Enter your new password",label:"Set new password"}),r(w,{type:"password",name:"password_confirmation",placeholder:"Confirm password",label:"Confirm password"}),r(N,{class:"w-full flex mt-6",size:"lg",disabled:e(a)||!e(m)},{default:_(()=>[e(a)?(f(),F(e(T),{key:0,class:"size-4 animate-spin mr-2"})):P("",!0),i("span",null,$(e(a)?"Please wait":"Reset password"),1)]),_:1},8,["disabled"])]),_:1},8,["validation-schema"])])])}}});export{J as default};
