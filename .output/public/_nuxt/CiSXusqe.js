import{f as E,r as d,x as f,s as o}from"./bxmSTM4p.js";const h=()=>{const{$repo:{event:u},$config:{public:{APP_BASE_URL:g}}}=E(),c=d(!1),i=d(null),v=d(!1),r=d(!1);return{fetchEventRequests:async a=>await u.getEventRequests(a),endEvent:async a=>{var n;try{c.value=!0;const e=await u.endEvent(a);c.value=!1,e.data&&f("/events/summary")}catch(e){c.value=!1,o({title:((n=e==null?void 0:e.data)==null?void 0:n.message)??"Failed to end event",variant:"warning"})}},ending:c,updateEventRequest:async(a,n,e)=>{var l;try{i.value=n,v.value=!0;const t=await u.updateEventRequest(a,n);o({title:t.message??"Updated"}),v.value=!1,i.value=null,t.data&&(e==null||e())}catch(t){i.value=null,v.value=!1,o({title:((l=t==null?void 0:t.data)==null?void 0:l.message)??"Failed to update event",variant:"warning"})}},update_status:i,updating:v,createEventRequest:async(a,n)=>{var e,l,t;try{r.value=!0;const s=await u.createRequest(a),y={redirect_url:`${g}/${n}/${a.event_id}/${s.data.id}/request-receipt`,type:"gateway",gateway:"paystack"};if(!Number(s.data.price))return r.value=!1,f(`/${(l=(e=s.data)==null?void 0:e.host)==null?void 0:l.slug}`);const p=await u.payForRequest(y,s.data.id);r.value=!1,p.data.redirect_url&&await f(p.data.redirect_url,{external:!0})}catch(s){r.value=!1,o({title:((t=s==null?void 0:s.data)==null?void 0:t.message)??"Failed to create request",variant:"warning"})}},creating:r}};export{h as u};
