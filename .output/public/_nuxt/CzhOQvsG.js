import{_ as N}from"./Ccavnmjg.js";import{y as v,u as k,z as A,r as C,o as u,C as f,w as r,b as o,B as n,D as E,a as s,t as L,_ as S,x,E as B,c as G,d as y,G as $}from"./D5arO9F3.js";import{_ as F}from"./CqOvMmf1.js";import{_ as h,F as R}from"./a5Z8Toz9.js";import{A as V}from"./h_O2H-HD.js";import{L as I}from"./BnxuoDm3.js";import"./B_TM8TBb.js";import"./BqjAheMm.js";const O=v({__name:"audience-signup-form",setup(w){const{$repo:{auth:m}}=k(),{saveAuthUser:a}=A(),t=C(!1),i=async l=>{var d,_,p;t.value=!0;const c={...l,password_confirmation:l.password};try{t.value=!0;const e=await m.registerAudience(c),g=e==null?void 0:e.message;x({title:g,description:"Follow the link in your email to verify your email",variant:"normal",duration:8e4}),t.value=!1,a(e.data.token,e.data.user);const b=((d=e==null?void 0:e.data)==null?void 0:d.role)==="host"?"/profile":"/search";B().push(b)}catch(e){t.value=!1,x({title:"Failed",description:((_=e==null?void 0:e.data)==null?void 0:_.message)??"Sign up failed. Please try again",variant:"warning"}),console.error("ERROR LOGGING IN",(p=e==null?void 0:e.data)==null?void 0:p.message)}};return(l,c)=>(u(),f(n(R),{"validation-schema":n(V),onSubmit:i,class:"space-y-7"},{default:r(()=>[o(h,{name:"email",placeholder:"Enter your email",label:"Email",type:"email"}),o(h,{name:"password",placeholder:"Enter your password",type:"password",label:"Password"}),o(S,{class:"w-full",type:"submit",size:"lg",disabled:n(t)},{default:r(()=>[n(t)?(u(),f(n(I),{key:0,class:"animate-spin mr-2"})):E("",!0),s("span",null,L(n(t)?"Please wait...":"Submit"),1)]),_:1},8,["disabled"])]),_:1},8,["validation-schema"]))}}),P={class:"h-full"},z={class:"absolute top-12 left-0"},D={class:"w-full"},T={class:"max-w-full w-[400px] mx-auto"},U={class:"text-center mt-2"},Y=v({__name:"audience",setup(w){return(m,a)=>{const t=N,i=$;return u(),G("div",P,[o(i,{name:"auth"},{default:r(()=>[s("div",z,[o(F,{to:"/signup"})]),s("div",D,[a[2]||(a[2]=s("div",{class:"text-primary text-center mb-2 text-xl"}," Create your account ",-1)),a[3]||(a[3]=s("div",{class:"text-4xl lg:text-5xl font-semibold my-4 text-center max-w-[595px] mx-auto font-display"}," Create your free audience account ",-1)),s("div",T,[o(O),s("div",U,[a[1]||(a[1]=y(" Already a user? ")),o(t,{to:"/login",class:"underline hover:no-underline ml-1"},{default:r(()=>a[0]||(a[0]=[y("LOGIN")])),_:1})])])])]),_:1})])}}});export{Y as default};
