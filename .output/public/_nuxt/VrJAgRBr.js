import{_ as A}from"./B4M3g5MA.js";import{h as v,f as N,i as S,r as k,o as u,n as f,w as i,b as o,m as n,L,q as C,a as s,t as E,_ as $,s as x,p as B,c as F,v as G,d as y}from"./bxmSTM4p.js";import{_ as R}from"./CZ3-iNoy.js";import{_ as h,F as V}from"./BTlqTHNK.js";import{A as I}from"./BS_f5a22.js";import{u as O}from"./NZmLVfKA.js";import"./DUXXyp4T.js";import"./Cpj98o6Y.js";const P=v({__name:"audience-signup-form",setup(g){const{$repo:{auth:m}}=N(),{saveAuthUser:a}=S(),t=k(!1),r=async l=>{var d,p,_;t.value=!0;const c={...l,password_confirmation:l.password};try{t.value=!0;const e=await m.registerAudience(c),w=e==null?void 0:e.message;x({title:w,description:"Follow the link in your email to verify your email",variant:"normal",duration:8e4}),t.value=!1,a(e.data.token,e.data.user);const b=((d=e==null?void 0:e.data)==null?void 0:d.role)==="host"?"/profile":"/search";B().push(b)}catch(e){t.value=!1,x({title:"Failed",description:((p=e==null?void 0:e.data)==null?void 0:p.message)??"Sign up failed. Please try again",variant:"warning"}),console.error("ERROR LOGGING IN",(_=e==null?void 0:e.data)==null?void 0:_.message)}};return(l,c)=>(u(),f(n(V),{"validation-schema":n(I),onSubmit:r,class:"space-y-7"},{default:i(()=>[o(h,{name:"email",placeholder:"Enter your email",label:"Email",type:"email"}),o(h,{name:"password",placeholder:"Enter your password",type:"password",label:"Password"}),o($,{class:"w-full",type:"submit",size:"lg",disabled:n(t)},{default:i(()=>[n(t)?(u(),f(n(L),{key:0,class:"animate-spin mr-2"})):C("",!0),s("span",null,E(n(t)?"Please wait...":"Submit"),1)]),_:1},8,["disabled"])]),_:1},8,["validation-schema"]))}}),T={class:"h-full"},U={class:"absolute top-12 left-0"},q={class:"w-full"},z={class:"max-w-full w-[400px] mx-auto"},D={class:"text-center mt-2"},Z=v({__name:"audience",setup(g){return O({title:"Sign Up As An Audience"}),(m,a)=>{const t=A,r=G;return u(),F("div",T,[o(r,{name:"auth"},{default:i(()=>[s("div",U,[o(R,{to:"/signup"})]),s("div",q,[a[2]||(a[2]=s("div",{class:"text-primary text-center mb-2 text-xl"}," Create your account ",-1)),a[3]||(a[3]=s("div",{class:"text-4xl lg:text-5xl font-semibold my-4 text-center max-w-[595px] mx-auto font-display"}," Create your free audience account ",-1)),s("div",z,[o(P),s("div",D,[a[1]||(a[1]=y(" Already a user? ")),o(t,{to:"/login",class:"underline hover:no-underline ml-1"},{default:i(()=>a[0]||(a[0]=[y("LOGIN")])),_:1})])])])]),_:1})])}}});export{Z as default};
