import{_ as ne}from"./D-r3Cif1.js";import{_ as ie}from"./xTpaSwCg.js";import{_ as le}from"./BOYXWpeF.js";import{_ as B}from"./_-3PIteb.js";import{_ as re}from"./BMh_6duC.js";import{_ as se}from"./CGcNKbb9.js";import{h as A,i as L,o as d,c as m,a as e,b as r,G as w,n as t,H as I,p as v,t as i,z as de,Y as ce,j as k,v as y,F as ue,E as me,k as pe,f as _e,m as fe,w as g,_ as F,d as R,Q as ge}from"./BnLl13wx.js";import{D as te}from"./B17ING25.js";import{_ as ve}from"./DNeFPUki.js";import{_ as xe}from"./C4Rb85IA.js";import{u as ye}from"./CTaCKzQX.js";import"./CkG4h_aG.js";import"./C6qotz5H.js";import"./CCYAyZE9.js";import"./Bce8lkdx.js";import"./DxUNpwON.js";const he={class:"flex gap-1 items-center"},$e={class:"space-y-1"},be={key:1,class:"flex items-center gap-2 text-base"},qe={class:"text-foreground font-medium"},ke={class:"text-muted-foreground"},we={class:"flex items-center text-muted-foreground"},Ee={class:"flex items-center gap-1 text-primary-foreground"},Se={class:"text-primary-foreground font-medium"},Fe={class:"text-muted-foreground text-sm"},Re={key:0,class:"text-primary text-sm"},Ie={key:1,class:"text-muted-foreground text-sm"},Ne=A({__name:"request-item",props:{type:{default:"song"},request:{}},setup(N){const{authEmail:_}=L(),n=ce("size-16 scale-75  shrink-0 rounded-full grid place-items-center",{variants:{type:{song:"bg-[#FFEE99]/10",hype:"bg-[#FF99F1]/10"}},defaultVariants:{type:"song"}});return(l,c)=>{const o=B,f=se;return d(),m("div",he,[e("div",{class:w(t(n)({type:l.type}))},[r(o,{name:l.type=="song"?"music":"mic",class:w(("cn"in l?l.cn:t(I))(l.request.status==="now-playing"?"animate-bounce":""))},null,8,["name","class"])],2),e("div",$e,[l.request.type==="hype"?(d(),v(f,{key:0,content:l.request.description,class:"font-medium"},null,8,["content"])):(d(),m("div",be,[e("div",qe,i(l.request.song_title),1),e("div",ke,"by "+i(l.request.artist),1)])),e("div",we,[e("div",Ee,[r(o,{name:"money"}),e("div",Se," â‚¦"+i(("formatMoney"in l?l.formatMoney:t(de))(l.request.price)),1)]),r(t(te)),e("div",Fe,i(l.request.type=="hype"?"HYPE":"SONG"),1),r(t(te)),t(_)===l.request.audience.email?(d(),m("div",Re," Your request ")):(d(),m("div",Ie," From "+i(l.request.nickname??l.request.audience.name),1))])])])}}}),ze={class:"w-full rounded-xl relative"},Be={class:"py-4 px-6 bg-[#1C1B1F] rounded-t-[inherit]"},Ae={class:"flex items-center gap-4 text-muted-foreground text-sm -ml-1"},Le={class:"flex items-center gap-px"},Me={class:"flex items-center gap-px"},Te={class:"relative px-6 py-8 bg-white/5 rounded-b-[inherit]"},Ue={class:"space-y-1 grid justify-center text-center mb-8 relative z-[3]"},Ce={key:1,class:"text-sm text-muted-foreground"},De={key:0,class:"p-1 absolute -translate-y-4 left-0 right-0 text-center text-background font-medium text-sm bg-gradient-to-r from-[#844AFF] from-[1.28%] via-[#E991DD] via-[58.26%] to-[#FCF0AF] to-[100%]"},Pe={key:1,class:"space-y-6"},Ve={key:2,class:"p-3 text-center grid place-items-center"},je=A({__name:"request-queue.card",props:{event:{}},setup(N){const _=N,{authEmail:n}=L(),l=k(()=>_.event.requests.sort(o=>o.audience.email===n.value?-1:0).slice(0,3)),c=k(()=>_.event.requests.find(o=>o.status==="now-playing"));return(o,f)=>{var s,a,u,p;const E=B,S=re,z=Ne;return d(),m("div",ze,[e("div",Be,[f[0]||(f[0]=e("div",{class:"font-display font-semibold text-2xl mb-2"},"Request Queue",-1)),e("div",Ae,[e("div",Le,[r(E,{name:"celebration",class:"relative scale-75"}),e("div",null,i(o.event.title),1)]),e("div",Me,[r(E,{name:"location",class:"relative scale-75"}),e("div",null,i(o.event.address),1)])])]),e("div",Te,[f[1]||(f[1]=e("div",{class:"bg-sp-purple/50 blur-[200px] size-56 absolute left-1/2 -translate-x-1/2"},null,-1)),e("div",Ue,[r(S,{src:"/images/disco.png",class:w(("cn"in o?o.cn:t(I))("size-[120px] mx-auto",t(c)&&"animate-spin"))},null,8,["class"]),t(c)?(d(),v(se,{key:0,class:"font-semibold text-base",content:((s=t(c))==null?void 0:s.type)==="hype"?(a=t(c))==null?void 0:a.description:((u=t(c))==null?void 0:u.song_title)??""},null,8,["content"])):y("",!0),t(c)?(d(),m("div",Ce," Now "+i(t(c).type==="song"?"playing":"performing hype")+"... ",1)):y("",!0)]),t(c)&&t(n)===t(c).audience.email?(d(),m("div",De,i(t(c).type==="hype"?"Performing":"Playing")+" your "+i((p=t(c))==null?void 0:p.type)+" request ",1)):y("",!0),e("div",{class:w(("cn"in o?o.cn:t(I))("text-muted-foreground mb-4",t(c)&&t(n)===t(c).audience.email&&"mt-16"))}," PREVIOUS REQUESTS ",2),t(l).length?(d(),m("div",Pe,[(d(!0),m(ue,null,me(t(l),h=>(d(),v(z,{key:h.id,request:h,type:h.type},null,8,["request","type"]))),128))])):(d(),m("div",Ve," No requests yet, hang tight "))])])}}}),Oe={class:"container pt-6 pb-20"},Qe={key:0,class:"grid grid-cols-1 md:grid-cols-[1fr_400px] justify-between gap-6 mt-10"},Ye={class:"grid lg:grid-cols-[auto_1fr] items-start gap-4"},Ge={class:"py-2"},He={class:"font-display text-3xl md:text-4xl font-semibold"},Je={class:"flex flex-wrap gap-4 items-center my-4 mb-6"},We={class:"flex items-center gap-2"},Ke={class:"flex items-center gap-1"},Xe={class:"font-semibold"},Ze={class:"flex items-center gap-2"},et={class:"flex items-center gap-1"},tt={class:"font-semibold"},st={class:"flex items-center gap-2"},at={class:"flex items-center gap-1"},ot={class:"font-semibold"},nt={class:"flex items-center gap-2"},it={class:"flex items-center gap-1"},lt={class:"font-semibold"},rt={class:"flex flex-col md:flex-row items-center gap-4"},dt={class:"mt-10 space-y-2 text-muted-foreground hidden md:block"},ct={class:"max-w-[550px]"},ut={class:"inline-flex bg-white/10 items-center rounded-xl py-4 px-6 gap-4"},mt={class:"text-lg font-semibold text-foreground"},pt={class:"mt-4 space-y-4 text-muted-foreground md:hidden"},_t={class:"max-w-[550px]"},ft={class:"inline-flex bg-white/10 items-center rounded-xl py-4 px-6 gap-4"},gt={class:"text-lg font-semibold text-foreground"},Bt=A({__name:"index",setup(N){const _=pe(),{data:n,error:l,status:c}=ye(`/user/host/${_.params.host}`),o=k(()=>{var s,a;return(a=(s=n==null?void 0:n.value)==null?void 0:s.data)==null?void 0:a.user}),{authEmail:f}=L(),E=k(()=>{var s,a,u;return(u=(a=(s=n.value)==null?void 0:s.data)==null?void 0:a.live_event)==null?void 0:u.requests}),S=k(()=>{var s;return(s=E.value)==null?void 0:s.some(a=>a.audience.email===f.value)}),{$config:{public:{APP_BASE_URL:z}}}=_e();return fe({title:()=>{var s;return`${((s=o==null?void 0:o.value)==null?void 0:s.stage_name)??""}`},ogTitle:()=>{var s,a,u,p;return`${((u=(a=(s=n.value)==null?void 0:s.data)==null?void 0:a.live_event)==null?void 0:u.title)??""} | ${((p=o.value)==null?void 0:p.stage_name)??""}`},ogDescription:()=>"Make your requests and take spotlight of this event",ogImage:()=>{var s;return`${((s=o.value)==null?void 0:s.profile_picture)??"https://cdn.pixabay.com/photo/2018/05/10/11/34/concert-3387324_1280.jpg"}`},ogImageAlt:()=>"Live Event",ogImageSecureUrl:()=>{var s;return`${((s=o.value)==null?void 0:s.profile_picture)??"https://cdn.pixabay.com/photo/2018/05/10/11/34/concert-3387324_1280.jpg"}`},twitterImage:()=>{var s;return`${((s=o.value)==null?void 0:s.profile_picture)??"https://cdn.pixabay.com/photo/2018/05/10/11/34/concert-3387324_1280.jpg"}`},twitterTitle:()=>{var s,a,u,p;return`${((u=(a=(s=n.value)==null?void 0:s.data)==null?void 0:a.live_event)==null?void 0:u.title)??""} | ${((p=o.value)==null?void 0:p.stage_name)??""}`},ogType:"article",ogUrl:()=>{var s;return`${z}/${((s=o.value)==null?void 0:s.slug)??""}`},ogSiteName:"SpinRequest"}),(s,a)=>{var M,T,U,C,D;const u=ne,p=ie,h=le,x=B,ae=je,oe=ve;return d(),m("div",Oe,[(M=t(n))!=null&&M.data.live_event?(d(),v(p,{key:0,class:"-translate-y-6",user:"audience","start-date":(C=(U=(T=t(n))==null?void 0:T.data)==null?void 0:U.live_event)==null?void 0:C.start_date,animate:""},{default:g(()=>{var $,b,q;return[r(u,{to:`/${t(_).params.host}/${(q=(b=($=t(n))==null?void 0:$.data)==null?void 0:b.live_event)==null?void 0:q.id}/make-a-request`},{default:g(()=>[r(F,null,{default:g(()=>[R("Make "+i(t(S)?"another":"a")+" request",1)]),_:1})]),_:1},8,["to"])]}),_:1},8,["start-date"])):y("",!0),r(h,{to:"/audience",class:w(("cn"in s?s.cn:t(I))((D=t(n))!=null&&D.data.live_event?"mt-10":""))},null,8,["class"]),r(oe,{loading:t(c)==="pending",error:t(l)},{default:g(()=>{var $,b,q,P,V,j,O,Q,Y,G,H,J,W,K,X,Z,ee;return[t(o)?(d(),m("div",Qe,[e("div",null,[e("div",Ye,[r(xe,{class:"!size-[120px] md:!size-[180px] xl:!size-[200px] !rounded-3xl !text-4xl",initials:("getInitials"in s?s.getInitials:t(ge))(($=t(o))==null?void 0:$.stage_name),image:t(o).profile_picture},null,8,["initials","image"]),e("div",Ge,[e("div",He,i(t(o).stage_name),1),e("div",Je,[e("div",We,[r(x,{name:"account_circle"}),e("div",Ke,[e("span",Xe,i((P=(q=(b=t(n))==null?void 0:b.data)==null?void 0:q.total_followers)==null?void 0:P.length),1),a[0]||(a[0]=e("span",{class:"text-muted-foreground"},"FOLLOWERS",-1))])]),e("div",Ze,[r(x,{name:"celebration"}),e("div",et,[e("span",tt,i((V=t(n))==null?void 0:V.data.total_events),1),a[1]||(a[1]=e("span",{class:"text-muted-foreground"},"EVENTS",-1))])]),e("div",st,[r(x,{name:"genres"}),e("div",at,[e("span",ot,i((j=t(n))==null?void 0:j.data.total_requests),1),a[2]||(a[2]=e("span",{class:"text-muted-foreground"},"REQUESTS",-1))])]),e("div",nt,[r(x,{name:"genres"}),e("div",it,[e("span",lt,i((O=t(n))==null?void 0:O.data.total_fulfilled_requests),1),a[3]||(a[3]=e("span",{class:"text-muted-foreground"},"FUFILLED",-1))])])]),e("div",rt,[r(F,{variant:"secondary",class:"w-full md:w-auto",size:"lg"},{default:g(()=>a[4]||(a[4]=[R(" Follow ")])),_:1}),(Q=t(n))!=null&&Q.data.live_event?(d(),v(u,{key:0,to:`/${t(_).params.host}/${(H=(G=(Y=t(n))==null?void 0:Y.data)==null?void 0:G.live_event)==null?void 0:H.id}/make-a-request`,class:"w-full md:w-auto"},{default:g(()=>[r(F,{size:"lg",class:"w-full"},{default:g(()=>[R(" Make "+i(t(S)?"another":"a")+" request ",1)]),_:1})]),_:1},8,["to"])):(d(),v(F,{key:1,class:"w-full md:w-auto",size:"lg"},{default:g(()=>a[5]||(a[5]=[R(" Notify me when DJ goes live ")])),_:1}))])])]),e("div",dt,[a[7]||(a[7]=e("div",null,"ABOUT ME",-1)),e("div",ct,i(t(o).bio),1),e("div",ut,[r(x,{name:"badge"}),e("div",null,[e("div",mt,i((J=t(n))==null?void 0:J.data.total_fulfilled_requests)+" of "+i((W=t(n))==null?void 0:W.data.total_requests),1),a[6]||(a[6]=e("div",{class:"text-muted-foreground"},"Request fufilled",-1))])])])]),(K=t(n))!=null&&K.data.live_event?(d(),v(ae,{key:0,event:(X=t(n))==null?void 0:X.data.live_event},null,8,["event"])):y("",!0),e("div",pt,[a[9]||(a[9]=e("div",null,"ABOUT ME",-1)),e("div",_t,i(t(o).bio),1),e("div",ft,[r(x,{name:"badge"}),e("div",null,[e("div",gt,i((Z=t(n))==null?void 0:Z.data.total_fulfilled_requests)+" of "+i((ee=t(n))==null?void 0:ee.data.total_requests),1),a[8]||(a[8]=e("div",{class:"text-muted-foreground"},"Request fufilled",-1))])])])])):y("",!0)]}),_:1},8,["loading","error"])])}}});export{Bt as default};
