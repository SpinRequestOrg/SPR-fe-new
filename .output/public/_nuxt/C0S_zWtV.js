import{A as re,_ as ue}from"./C4VXNApb.js";import{_ as N,e as j,u as pe,a as ce,b as me}from"./CKTMvQvy.js";import{e as W,h as k,z as fe,A as _e,r as D,o as m,n as b,w as n,b as e,a7 as A,_ as x,d as q,a as s,c as y,q as $,m as t,X as I,B as P,y as Z,a6 as ve,a8 as ge,a9 as ye,aa as he,ab as xe,ac as be,ad as qe,ae as we,af as $e,t as v,l as ke,f as ee,L as O,F as T,E as H,s as M,ag as Ce,ah as Re,ai as Ee,aj as ze,ak as Ue,al as De,x as Te,C as te,am as Y,an as Ae,ao as Le,ap as Me,aq as se,ar as ne,as as ae,k as oe,j as U,at as Se,au as Fe,av as Ve,aw as Be,ax as Ne}from"./54tIwAh0.js";import{_ as je}from"./B9j0vBJp.js";import{_ as Ie}from"./Bd8hejFT.js";import{_ as F}from"./D5eIgWD0.js";import{C as Pe}from"./CUn-cLLW.js";import{D as J}from"./C5oEYDnb.js";import{u as Oe}from"./CTxeXEHA.js";import{u as He}from"./BFHypoIu.js";import{u as Ye}from"./BuRy2gyZ.js";/**
 * @license lucide-vue-next v0.447.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=W("CheckIcon",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-vue-next v0.447.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xe=W("RefreshCcwIcon",[["path",{d:"M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"14sxne"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16",key:"1hlbsb"}],["path",{d:"M16 16h5v5",key:"ccwih5"}]]),Ge={key:0,class:"absolute left-0 right-0 h-[0.5px] bg-slate-300/20 top-[46px]"},Qe=k({__name:"modal",props:fe({showClose:{type:Boolean,default:!0},size:{default:"md"}},{modelValue:{type:Boolean},modelModifiers:{}}),emits:["update:modelValue"],setup(h){const u=ve("content fixed bg-gray-900 top-[50%] left-[50%] w-[90vw] translate-x-[-50%] translate-y-[-50%] rounded-xl bg-background p-[25px] shadow-[hsl(206_22%_7%_/_35%)_0px_10px_38px_-10px,_hsl(206_22%_7%_/_20%)_0px_10px_20px_-15px] focus:outline-none z-[100]",{variants:{size:{xl:"max-w-[4xl] max-h-[95vh]",lg:"max-w-3xl max-h-[85vh]",md:"max-w-xl max-h-[75vh]",sm:"max-w-[500px] max-h-[55vh]"}},defaultVariants:{size:"lg"}}),l=_e(h,"modelValue"),i=D(l.value),c=()=>{i.value=!i.value};return(p,a)=>{const r=ge,o=ye,d=he,_=xe,w=be,E=qe,z=we,g=$e;return m(),b(g,{open:t(i),"onUpdate:open":[a[0]||(a[0]=f=>Z(i)?i.value=f:null),a[1]||(a[1]=f=>l.value=f)]},{default:n(()=>[e(r,{"as-child":""},{default:n(()=>[A(p.$slots,"trigger",{},()=>[e(x,{variant:"outline"},{default:n(()=>a[2]||(a[2]=[q("Open")])),_:1})])]),_:3}),e(z,null,{default:n(()=>[e(o,{class:"fixed inset-0 z-50 bg-black/70 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0"}),e(E,{class:"[&[data-state='open']_.content]:animate-contentShow [&[data-state='open']_.header]:slide-in-from-top-1"},{default:n(()=>[s("div",{class:P(t(u)({size:p.size}))},[p.showClose?(m(),y("div",Ge)):$("",!0),p.showClose?(m(),b(d,{key:1,class:"text-foreground/60 hover:bg-foreground/10 focus:shadow-foreground/50 absolute top-[10px] right-[10px] inline-flex h-[25px] w-[25px] appearance-none items-center justify-center rounded-full focus:shadow-[0_0_0_2px] focus:outline-none","aria-label":"Close"},{default:n(()=>[e(t(I))]),_:1})):$("",!0),s("div",null,[e(_,null,{default:n(()=>[A(p.$slots,"title",{},()=>[a[3]||(a[3]=s("div",{class:"sr-only"},"Modal Title",-1))])]),_:3}),e(w,null,{default:n(()=>[A(p.$slots,"description",{},()=>[a[4]||(a[4]=s("div",{class:"sr-only"},"Modal Description",-1))])]),_:3}),A(p.$slots,"default",{toggle:c},()=>[a[5]||(a[5]=q("Modal Content"))])])],2)]),_:3})]),_:3})]),_:3},8,["open"])}}}),Je={class:"py-10 text-2xl font-medium text-center font-display"},Ke={class:"flex items-center gap-4"},V=k({__name:"confirm-dialog",props:{message:{default:"Are you sure you want to continue?"},closeOnConfirm:{type:Boolean,default:!0},onConfirm:{}},setup(h){const u=h,l=i=>{var c;(c=u.onConfirm)==null||c.call(u),u.closeOnConfirm&&(i==null||i())};return(i,c)=>{const p=Qe;return m(),b(p,{size:"sm"},{trigger:n(()=>[A(i.$slots,"default",{},()=>[e(x,{variant:"destructive"},{default:n(()=>c[0]||(c[0]=[q("Confirm")])),_:1})])]),default:n(({toggle:a})=>[s("div",null,[s("div",Je,v(i.message),1),s("div",Ke,[e(x,{variant:"destructive",class:"w-full",onClick:r=>l(a)},{default:n(()=>c[1]||(c[1]=[q(" Yes ")])),_:2},1032,["onClick"]),e(x,{variant:"outline",class:"w-full",onClick:a},{default:n(()=>c[2]||(c[2]=[q(" No ")])),_:2},1032,["onClick"])])])]),_:3})}}}),We={class:"w-full border rounded-3xl bg-white/5 px-6 py-4 relative"},Ze={key:0,class:"absolute inset-0 grid place-items-center bg-background/65 rounded-[inherit] z-10"},et={class:"space-y-6 my-8"},tt={class:"text-lg text-muted-foreground capitalize min-w-fit"},st=k({__name:"event-rate-card",props:{services:{},onUpdate:{type:Function}},setup(h){const u=h,l=D(!1),i=D([]);ke(()=>u.services,r=>{i.value=r},{immediate:!0});const{$repo:{event:c}}=ee(),p=async(r,o)=>await c.updateEventPrice(r,o),a=async()=>{var r;try{l.value=!0;const o=await Promise.all(i.value.map(d=>p(d.id,d.price)));l.value=!1,M({title:"Prices updated"})}catch(o){l.value=!1,M({title:((r=o==null?void 0:o.data)==null?void 0:r.message)??"Failed to update prices",variant:"warning"}),console.error("FAILED TO UPDATE PRICES",o)}};return(r,o)=>(m(),y("div",We,[t(l)?(m(),y("div",Ze,[e(t(O),{class:"size-5 animate-spin"})])):$("",!0),o[5]||(o[5]=s("div",{class:"text-2xl font-medium"},"Live prices",-1)),s("div",et,[(m(!0),y(T,null,H(t(i),d=>(m(),y("div",{class:"flex justify-between items-center",key:d.id},[s("div",tt,[q(v(d.name)+" ",1),o[0]||(o[0]=s("span",{class:"hidden md:inline"},"request",-1))]),e(je,{modelValue:d.price,"onUpdate:modelValue":_=>d.price=_,id:`PRICE-FOR-${d.name}-${d.id}`,step:100},null,8,["modelValue","onUpdate:modelValue","id"]),$("",!0)]))),128))]),e(x,{class:"w-full",onClick:a},{default:n(()=>o[4]||(o[4]=[q("Update price")])),_:1})]))}}),ie=k({__name:"tooltip",props:{message:{default:"title"},delay:{default:300},disabled:{type:Boolean,default:!1}},setup(h){return(u,l)=>{const i=Ce,c=Re,p=Ee,a=ze,r=Ue,o=De;return m(),b(o,{"delay-duration":u.delay,disabled:u.disabled},{default:n(()=>[e(r,null,{default:n(()=>[e(i,{"as-child":""},{default:n(()=>[A(u.$slots,"default")]),_:3}),e(a,null,{default:n(()=>[e(p,{class:"z-50 overflow-hidden rounded-md bg-foreground px-3 py-2 text-sm text-muted animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2","side-offset":1},{default:n(()=>[q(v(u.message)+" ",1),e(c,{class:"fill-foreground",width:8})]),_:1})]),_:1})]),_:3})]),_:3},8,["delay-duration","disabled"])}}}),S=()=>{const{$repo:{event:h}}=ee(),u=D(!1),l=D(null),i=D(!1);return{fetchEventRequests:async r=>await h.getEventRequests(r),endEvent:async r=>{var o;try{u.value=!0;const d=await h.endEvent(r);u.value=!1,d.data&&Te("/events/summary")}catch(d){u.value=!1,M({title:((o=d==null?void 0:d.data)==null?void 0:o.message)??"Failed to end event",variant:"warning"})}},ending:u,updateEventRequest:async(r,o,d)=>{var _;try{l.value=o,i.value=!0;const w=await h.updateEventRequest(r,o);M({title:w.message??"Updated"}),i.value=!1,l.value=null,w.data&&(d==null||d())}catch(w){l.value=null,i.value=!1,M({title:((_=w==null?void 0:w.data)==null?void 0:_.message)??"Failed to update event",variant:"warning"})}},update_status:l,updating:i}},nt={class:"space-y-1 text-left"},at={class:"font-medium"},ot={class:"py-4 mt-4 border-t border-t-white/5"},lt={class:"flex gap-x-2"},it={class:"space-y-1 w-full"},dt={class:"text-white/80"},rt={class:"space-y-1 w-full"},ut={class:"tabular-nums text-white/80"},pt={key:0,class:"flex gap-x-4 mt-8"},ct={key:1,class:"py-1 px-6 bg-foreground text-background text-center text-sm mt-8 rounded-3xl animate-pulse"},mt=k({__name:"request-collapsible-item",props:{request:{},index:{},onUpdate:{},defaultOpen:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},setup(h){const u=h,l=D(u.defaultOpen),i=D(!1),{updateEventRequest:c,update_status:p,updating:a}=S(),r=()=>{u.disabled||i.value||(l.value=!l.value)},o=d=>{c(u.request.id,d,u.onUpdate)};return(d,_)=>{const w=Ae,E=Le,z=Me;return m(),b(z,{class:"bg-white/5 rounded-2xl",open:t(l),disabled:d.disabled},{default:n(()=>[e(w,{class:"grid grid-cols-[auto_1fr_auto] gap-x-4 w-full items-center justify-start relative px-4 sm:px-6 py-3 [&[data-state='open']_.caret]:rotate-180",onClick:r},{default:n(()=>{var g;return[s("div",{class:P(("cn"in d?d.cn:t(te))(d.request.status==="now-playing"?"text-primary text-base font-medium":"text-foreground"))},v(d.index??"-"),3),s("div",nt,[d.request.type==="hype"?(m(),b(N,{key:0,content:(g=d.request)==null?void 0:g.hype_message,modelValue:t(i),"onUpdate:modelValue":_[0]||(_[0]=f=>Z(i)?i.value=f:null)},null,8,["content","modelValue"])):(m(),y(T,{key:1},[s("div",at,v(d.request.name),1),_[2]||(_[2]=s("div",{class:"text-sm text-muted-foreground"},"by Adekunle gold",-1))],64))]),e(t(Pe),{class:"size-5 caret transition-transform relative"})]}),_:1}),e(E,{class:"data-[state=open]:animate-collapsibleSlideDown data-[state=closed]:animate-collapsibleSlideUp overflow-hidden px-4 sm:px-6"},{default:n(()=>[s("div",ot,[s("div",lt,[s("div",it,[_[3]||(_[3]=s("div",{class:"text-sm text-muted-foreground"},"Requested by",-1)),s("div",dt,v(d.request.audience.name),1)]),s("div",rt,[_[4]||(_[4]=s("div",{class:"text-sm text-muted-foreground"},"Amount paid",-1)),s("div",ut," â‚¦"+v(("formatMoney"in d?d.formatMoney:t(Y))(d.request.amount)),1)])]),d.request.status==="new"?(m(),y("div",pt,[e(x,{class:"w-full",disabled:t(a),loading:t(a)&&t(p)==="now-playing",onClick:_[1]||(_[1]=g=>o("now-playing"))},{default:n(()=>[_[5]||(_[5]=q(" Accept ")),e(t(le),{class:"size-4 ml-2"})]),_:1},8,["disabled","loading"]),e(V,{onConfirm:()=>o("declined")},{default:n(()=>[e(x,{variant:"secondary",class:"w-full !border-destructive !text-destructive",disabled:t(a),loading:t(a)&&t(p)==="declined"},{default:n(()=>[_[6]||(_[6]=q(" Reject ")),e(t(I),{class:"size-4 ml-2"})]),_:1},8,["disabled","loading"])]),_:1},8,["onConfirm"])])):d.request.status==="now-playing"?(m(),y("div",ct," Now "+v(d.request.type==="hype"?"hyping":"playing"),1)):$("",!0)])]),_:1})]),_:1},8,["open","disabled"])}}}),ft={class:"grid grid-cols-request-line-item gap-x-4 items-center px-2 sm:px-6 py-4 bg-white/5 rounded-2xl"},_t={class:"space-y-1"},vt={class:"font-medium"},gt={class:"space-y-1"},yt={class:"text-white/80"},ht={class:"space-y-1"},xt={class:"tabular-nums text-white/80"},bt={key:0,class:"flex gap-x-2 justify-self-end"},qt={key:1,class:"py-1 px-6 bg-foreground text-background text-center text-sm rounded-2xl animate-pulse justify-self-end"},wt=k({__name:"request-line-item",props:{request:{},index:{},onUpdate:{type:Function}},setup(h){const u=h,{updateEventRequest:l,update_status:i,updating:c}=S(),p=a=>{l(u.request.id,a,u.onUpdate)};return(a,r)=>{var o;return m(),y("div",ft,[s("div",{class:P(("cn"in a?a.cn:t(te))(a.request.status==="now-playing"?"text-primary text-base font-medium":"text-foreground"))},v(a.index??"-"),3),s("div",_t,[a.request.type==="hype"?(m(),b(N,{key:0,content:(o=a.request)==null?void 0:o.description},null,8,["content"])):(m(),y(T,{key:1},[s("div",vt,v(a.request.name),1),r[1]||(r[1]=s("div",{class:"text-sm text-muted-foreground"},"by Adekunle gold",-1))],64))]),s("div",gt,[r[2]||(r[2]=s("div",{class:"text-sm text-muted-foreground"},"Requested by",-1)),s("div",yt,v(a.request.audience.name),1)]),s("div",ht,[r[3]||(r[3]=s("div",{class:"text-sm text-muted-foreground"},"Amount paid",-1)),s("div",xt," â‚¦"+v(("formatMoney"in a?a.formatMoney:t(Y))(a.request.amount)),1)]),a.request.status==="new"?(m(),y("div",bt,[e(x,{onClick:r[0]||(r[0]=d=>p("now-playing")),disabled:t(c),loading:t(c)&&t(i)==="now-playing"},{default:n(()=>[r[4]||(r[4]=q(" Accept ")),e(t(le),{class:"size-3 ml-2"})]),_:1},8,["disabled","loading"]),e(V,{onConfirm:()=>p("declined"),message:"Are you sure you want to reject this request?"},{default:n(()=>[e(x,{variant:"secondary",disabled:t(c),loading:t(c)&&t(i)==="declined",class:"!border-destructive !text-destructive"},{default:n(()=>[r[5]||(r[5]=q(" Reject ")),e(t(I),{class:"size-3 ml-2"})]),_:1},8,["disabled","loading"])]),_:1},8,["onConfirm"])])):a.request.status==="now-playing"?(m(),y("div",qt," Now "+v(a.request.type==="hype"?"hyping":"playing"),1)):$("",!0)])}}}),$t={key:0,class:"min-h-[350px]"},kt={class:"place-center grid place-items-center gap-2"},Ct={class:"size-12 rounded-full bg-white/40 relative"},Rt={class:"text-xl text-muted-foreground font-medium"},K=k({__name:"request-list",props:{requests:{default:()=>j},onUpdate:{},type:{default:"song"},loading:{type:Boolean,default:!1}},setup(h){const u=l=>{l.preventDefault()};return(l,i)=>{const c=se,p=F,a=ne,r=ae;return m(),b(r,null,{default:n(()=>[e(a,{class:"space-y-2 relative"},{default:n(()=>[(m(!0),y(T,null,H(l.requests,(o,d)=>(m(),b(c,{key:o.id,value:o.id,onSelect:u},{default:n(()=>[e(mt,{request:o,class:"min-[880px]:hidden",index:d+1,onUpdate:l.onUpdate,"default-open":o.status==="now-playing",disabled:o.status==="now-playing"},null,8,["request","index","onUpdate","default-open","disabled"]),e(wt,{request:o,class:"hidden min-[880px]:grid",index:d+1,onUpdate:l.onUpdate},null,8,["request","index","onUpdate"])]),_:2},1032,["value"]))),128)),!l.requests.length&&!l.loading?(m(),y("div",$t,[s("div",kt,[s("div",Ct,[e(p,{class:"scale-75 place-center",name:l.type=="song"?"music":"mic"},null,8,["name"])]),s("div",Rt," No "+v(l.type)+" requests ",1),i[0]||(i[0]=s("div",{class:"text-muted-foreground"}," Get prepared, requests may come soon ",-1))])])):$("",!0)]),_:1})]),_:1})}}}),Et={class:"grid md:grid-cols-[70px_1fr] gap-2 px-2 sm:px-6 py-4 b-white/5 rounded-2xl text-muted-foreground"},zt={class:"grid md:grid-cols-[1fr_200px] gap-2 items-center"},Ut={class:"space-y-1"},Dt={class:"flex gap-x-2 items-center"},Tt={class:"text-base text-foreground font-medium"},At={class:"text-sm"},Lt={class:"flex gap-x- items-center"},Mt={class:"flex items-center gap-x-1"},St={class:"uppercase"},Ft={class:"tabular-nums"},Vt={class:"flex gap-x-1 md:justify-end items-center"},Bt={class:"capitalize"},Nt=k({__name:"request-history-line-item",props:{request:{},index:{},onUpdate:{type:Function}},setup(h){const u=h,{updateEventRequest:l,updating:i}=S(),c=p=>{l(u.request.id,p,u.onUpdate)};return(p,a)=>{const r=F,o=x;return m(),y("div",Et,[s("div",null,v(("useDateFormat"in p?p.useDateFormat:t(pe))(new Date(p.request.created_at),"h:mma")),1),s("div",zt,[s("div",Ut,[s("div",Dt,[p.request.type==="hype"?(m(),b(N,{key:0,content:p.request.hype_message,class:"text-base text-foreground font-medium"},null,8,["content"])):(m(),y(T,{key:1},[s("div",Tt,v(p.request.name),1),s("div",At,v(p.request.audience.name),1)],64))]),s("div",Lt,[s("div",null,v(p.request.audience.name),1),e(t(J)),s("div",Mt,[e(r,{class:"scale-50",name:p.request.type=="song"?"music":"mic"},null,8,["name"]),s("div",St,v(p.request.type),1)]),e(t(J)),s("div",Ft,"â‚¦"+v(("formatMoney"in p?p.formatMoney:t(Y))(p.request.amount)),1)])]),s("div",Vt,[s("div",Bt,v(p.request.status),1),e(ie,{message:"Return to request list",delay:200},{default:n(()=>[e(o,{size:"icon",variant:"ghost",disabled:t(i),loading:t(i),onClick:a[0]||(a[0]=()=>c("new"))},{default:n(()=>[e(t(Xe),{class:"text-muted-foreground size-4"})]),_:1},8,["disabled","loading"])]),_:1})])])])}}}),jt={key:0,class:"min-h-[350px]"},It={class:"place-center grid place-items-center gap-2"},Pt={class:"size-12 rounded-full bg-white/40 relative"},Ot=k({__name:"request-history-list",props:{requests:{default:()=>j},onUpdate:{},loading:{type:Boolean,default:!1}},setup(h){const u=l=>{l.preventDefault()};return(l,i)=>{const c=se,p=F,a=ne,r=ae;return m(),b(r,null,{default:n(()=>[e(a,{class:"space-y-2 relative"},{default:n(()=>[(m(!0),y(T,null,H(l.requests,o=>(m(),b(c,{key:o.id,value:o.id,onSelect:u},{default:n(()=>[e(Nt,{request:o,onUpdate:l.onUpdate},null,8,["request","onUpdate"])]),_:2},1032,["value"]))),128)),!l.requests.length&&!l.loading?(m(),y("div",jt,[s("div",It,[s("div",Pt,[e(p,{class:"scale-75 place-center",name:"history"})]),i[0]||(i[0]=s("div",{class:"text-xl text-muted-foreground font-medium"}," Nothing yet ",-1)),i[1]||(i[1]=s("div",{class:"text-muted-foreground"}," Your completed/rejected requests will be here ",-1))])])):$("",!0)]),_:1})]),_:1})}}}),Ht={class:"size-5 text-sm bg-secondary text-destructive rounded-full font-semibold count"},Yt={class:"size-5 text-sm bg-secondary text-destructive rounded-full font-semibold count"},Xt={class:"md:hidden"},Gt={key:2,class:"min-h-[350px] rounded-[inherit] grid place-items-center z-10"},Qt={key:1,class:"grid place-items-center gap-y-4"},Jt={class:"text-destructive text-center"},Kt=k({__name:"requests-tab",props:{requests:{default:()=>j},event_id:{default:"1"}},setup(h){const u=h,l=oe(),i=U(()=>{var g;return(g=l==null?void 0:l.query)==null?void 0:g.request_tab}),c=U(()=>i.value??"song"),{fetchEventRequests:p}=S(),{data:a,status:r,error:o,refresh:d}=Oe(`EVENT-${u.event_id}-REQUESTS`,()=>p(u.event_id),{transform:g=>{const f={"now-playing":0,new:1,"payment-pending":2,completed:3,declined:4,ignored:5};return g.data.sort((C,R)=>(f==null?void 0:f[C.status])-f[R.status])}}),_=U(()=>{var g;return!a.value||o.value?[]:(g=a.value)==null?void 0:g.filter(f=>f.status==="new"||f.status==="now-playing")}),w=U(()=>{var g;return!a.value||o.value?[]:(g=a.value)==null?void 0:g.filter(f=>f.status!=="new"&&f.status!=="now-playing")}),E=U(()=>_.value.filter(g=>g.type==="song")),z=U(()=>_.value.filter(g=>g.type==="hype"));return(g,f)=>{const C=Ie,R=Se,L=Fe,X=F,B=Ve,de=Be;return m(),b(de,{class:"border bg-white/5 rounded-3xl relative","default-value":t(c)},{default:n(()=>{var G,Q;return[t(c)==="history"?(m(),b(L,{key:0,class:"p-4 border-b grid grid-cols-[auto_1fr] gap-x-4 items-center min-h-[73px] transition-opacity duration-1000"},{default:n(()=>[f[2]||(f[2]=s("div",{class:"text-lg font-medium pl-6 hidden md:block"},"Request history",-1)),e(R,{value:"song","as-child":""},{default:n(()=>[e(C,{replace:"",to:{query:{...t(l).query,request_tab:"song"}},class:"flex items-center gap-x-1 ml-auto pr-6"},{default:n(()=>[e(x,{variant:"outline",size:"icon"},{default:n(()=>[e(t(re))]),_:1}),f[1]||(f[1]=s("div",null,"Back to live request",-1))]),_:1},8,["to"])]),_:1})]),_:1})):(m(),b(L,{key:1,class:"p-4 border-b grid grid-cols-[auto_auto_1fr] gap-x-4 items-center -z-10"},{default:n(()=>[e(R,{value:"song","as-child":""},{default:n(()=>[e(C,{replace:"",to:{query:{...t(l).query,request_tab:"song"}},class:"[&[data-state='active']_.count]:hidden"},{default:n(()=>[e(x,{variant:t(c)==="song"?"primary":"outline",class:"gap-x-2 md:min-w-[100px]"},{default:n(()=>[f[3]||(f[3]=s("div",null,"song",-1)),s("div",Ht,v(t(E).length),1)]),_:1},8,["variant"])]),_:1},8,["to"])]),_:1}),e(R,{value:"hype","as-child":""},{default:n(()=>[e(C,{replace:"",to:{query:{...t(l).query,request_tab:"hype"}},class:"[&[data-state='active']_.count]:hidden"},{default:n(()=>[e(x,{variant:t(c)==="hype"?"primary":"outline",class:"gap-x-2 md:min-w-[100px]"},{default:n(()=>[f[4]||(f[4]=s("div",null,"hype",-1)),s("div",Yt,v(t(z).length),1)]),_:1},8,["variant"])]),_:1},8,["to"])]),_:1}),e(R,{value:"history","as-child":""},{default:n(()=>[e(C,{to:{query:{...t(l).query,request_tab:"history"}},replace:"",class:"ml-auto"},{default:n(()=>[e(x,{variant:"ghost",class:"gap-x-2 text-muted-foreground hidden md:inline-flex"},{default:n(()=>[e(X,{name:"history"}),f[5]||(f[5]=s("div",null,"Request history",-1))]),_:1}),s("div",Xt,[e(ie,{message:"Request history"},{default:n(()=>[e(x,{variant:"ghost",size:"icon"},{default:n(()=>[e(X,{name:"history"})]),_:1})]),_:1})])]),_:1},8,["to"])]),_:1})]),_:1})),t(r)=="pending"||t(o)?(m(),y("div",Gt,[t(r)==="pending"?(m(),b(t(O),{key:0,class:"size-5 animate-spin"})):t(o)?(m(),y("div",Qt,[s("div",Jt,v(((Q=(G=t(o))==null?void 0:G.data)==null?void 0:Q.message)??"Failed to load request"),1),e(x,{variant:"secondary",onClick:f[0]||(f[0]=()=>t(d)())},{default:n(()=>f[6]||(f[6]=[q(" Retry ")])),_:1})])):$("",!0)])):$("",!0),t(o)?$("",!0):(m(),y(T,{key:3},[e(B,{value:"song"},{default:n(()=>[e(K,{type:"song",loading:t(r)==="pending",requests:t(E),onUpdate:t(d),class:"p-4"},null,8,["loading","requests","onUpdate"])]),_:1}),e(B,{value:"hype",class:"p-4"},{default:n(()=>[e(K,{type:"hype",loading:t(r)==="pending",requests:t(z),onUpdate:t(d)},null,8,["loading","requests","onUpdate"])]),_:1}),e(B,{value:"history",class:"p-4"},{default:n(()=>[e(Ot,{loading:t(r)==="pending",requests:t(w),onUpdate:t(d)},null,8,["loading","requests","onUpdate"])]),_:1})],64))]}),_:1},8,["default-value"])}}}),Wt={class:"fixed left-0 right-0 bg-[#FFEE99] py-2 z-[20]"},Zt={class:"container flex justify-between items-center relative z-10"},es=k({__name:"live-banner",props:{startDate:{},onEndEvent:{type:Function},ending:{type:Boolean}},setup(h){const u=h,l=U(()=>{const i=ce(),c=u.startDate;return c?Ne(c,i.value):"00:00:00"});return(i,c)=>(m(),y("div",Wt,[s("div",Zt,[e(x,{variant:"outline",class:"min-w-[100px]"},{default:n(()=>[q(v(t(l)),1)]),_:1}),e(V,{onConfirm:i.onEndEvent,message:"Are you sure you want to end this event?"},{default:n(()=>[e(x,{variant:"destructive",ending:i.ending},{default:n(()=>c[0]||(c[0]=[q("END EVENT")])),_:1},8,["ending"])]),_:1},8,["onConfirm"])])]))}}),ts={class:"container py-20"},ss={class:"flex items-center gap-x-2"},ns={class:"text-foreground font-medium text-lg"},as={class:"grid xl:grid-cols-[1fr_auto] items-start gap-4"},os={class:"xl:max-w-[900px]"},ls={class:"max-w-[700px] mx-auto w-full xl:w-[380px] relative"},is={key:0,class:"absolute inset-0 grid place-items-center bg-background/40"},hs=k({__name:"[id]",setup(h){const u=oe(),{endEvent:l,ending:i}=S(),{data:c,error:p,status:a,refresh:r}=He(`/events/${u.params.id}`),o=()=>{l(u.params.id)},d=U(()=>{var _;return(_=u==null?void 0:u.query)==null?void 0:_.request_tab});return Ye({title:()=>d.value==="history"?"Request History":"Song and Hype Request List"}),(_,w)=>{var g,f,C;const E=ue,z=me;return m(),y("div",null,[e(es,{ending:t(i),onEndEvent:o,"start-date":(g=t(c))==null?void 0:g.data.start_date},null,8,["ending","start-date"]),s("div",ts,[s("div",ss,[e(E,{to:"/dashboard"}),s("div",ns,v((C=(f=t(c))==null?void 0:f.data)==null?void 0:C.title),1)]),e(z,{error:t(p),class:"mt-8"},{default:n(()=>{var R,L;return[s("div",as,[s("div",os,[e(Kt,{event_id:t(u).params.id},null,8,["event_id"])]),s("div",ls,[t(a)==="pending"?(m(),y("div",is,[e(t(O),{class:"size-5 animate-spin"})])):$("",!0),e(st,{services:((L=(R=t(c))==null?void 0:R.data)==null?void 0:L.types)??[],onUpdate:t(r)},null,8,["services","onUpdate"]),e(V,{onConfirm:o,message:"Are you sure you want to end this event?"},{default:n(()=>[e(x,{class:"w-full mt-6",variant:"destructive",size:"lg",ending:t(i)},{default:n(()=>w[0]||(w[0]=[q(" END EVENT ")])),_:1},8,["ending"])]),_:1})])])]}),_:1},8,["error"])])])}}});export{hs as default};
