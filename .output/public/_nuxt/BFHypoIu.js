import{j as D,S as u,aM as F,Z as T,aN as x,f as A}from"./54tIwAh0.js";import{u as L}from"./CTxeXEHA.js";function O(s,o,i){const[e={},r]=typeof o=="string"?[{},o]:[o,i],t=D(()=>u(s)),n=e.key||F([r,typeof t.value=="string"?t.value:"",...R(e)]);if(!n||typeof n!="string")throw new TypeError("[nuxt] [useFetch] key must be a string: "+n);if(!s)throw new Error("[nuxt] [useFetch] request is missing.");const c=n===r?"$f"+n:n;if(!e.baseURL&&typeof t.value=="string"&&t.value[0]==="/"&&t.value[1]==="/")throw new Error('[nuxt] [useFetch] the request URL must not start with "//".');const{server:d,lazy:y,default:b,transform:g,pick:w,watch:h,immediate:v,getCachedData:$,deep:_,dedupe:k,...q}=e,p=T({...x,...q,cache:typeof e.cache=="boolean"?void 0:e.cache}),C={server:d,lazy:y,default:b,transform:g,pick:w,immediate:v,getCachedData:$,deep:_,dedupe:k,watch:h===!1?[]:[p,t,...h||[]]};let a;return L(c,()=>{var m;(m=a==null?void 0:a.abort)==null||m.call(a,"Request aborted as another request to the same endpoint was initiated."),a=typeof AbortController<"u"?new AbortController:{};const l=u(e.timeout);let f;return l&&(f=setTimeout(()=>a.abort("Request aborted due to timeout."),l),a.signal.onabort=()=>clearTimeout(f)),(e.$fetch||globalThis.$fetch)(t.value,{signal:a.signal,...p}).finally(()=>{clearTimeout(f)})},C)}function R(s){var i;const o=[((i=u(s.method))==null?void 0:i.toUpperCase())||"GET",u(s.baseURL)];for(const e of[s.params||s.query]){const r=u(e);if(!r)continue;const t={};for(const[n,c]of Object.entries(r))t[u(n)]=u(c);o.push(t)}return o}const S=(s,o={})=>O(s,{...o,$fetch:A().$api},"$sC22i8rhLA");export{S as u};
