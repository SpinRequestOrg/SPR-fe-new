import{_ as O}from"./BZIAfUg2.js";import{_ as Q}from"./DrK4-yIW.js";import{h as I,k as J,j as c,m as K,o as d,c as u,b as r,n as e,w as F,a as s,t as a,z as p,G as $,H as j,v as f,d as W,_ as X}from"./geAS62Tz.js";import{_ as Z}from"./DMs5Hs6o.js";import{_ as ee}from"./m40I0IZp.js";import{u as B}from"./DMt7b15i.js";import{u as te}from"./aQUqYxW3.js";import"./BmPEQnjb.js";import"./Dtfr0CuO.js";import"./Drd93OGA.js";const se={class:"container py-10"},ne={class:"max-w-full w-[400px] mx-auto"},oe={class:"bg-white/5 border rounded-2xl p-6"},ae={class:"pb-6 space-y-1 text-center border-b"},re={class:"font-bold text-primary text-4xl"},ie={class:"my-6 space-y-4"},le={class:"flex items-center justify-between"},me={key:0,class:"flex items-center justify-between"},de={key:1,class:"flex items-center justify-between"},ue={key:2,class:"flex items-center justify-between"},ce={class:"flex items-center justify-between"},pe={class:"bg-white/5 border pt-1 pb-8 rounded-tr-3xl rounded-tl-3xl"},fe={class:"flex justify-center items-center gap-x-2"},Me=I({__name:"make-payment",setup(xe){const i=J(),{status:C,data:P,error:R}=B(`/requests/${i.params.request_id}`),{status:T,data:l,error:V}=B("/wallets"),o=c(()=>{var n;return(n=P.value)==null?void 0:n.data}),z=c(()=>{var n,t;return Number(((n=l.value)==null?void 0:n.wallet_balance)??0)>=Number(((t=o.value)==null?void 0:t.price)??0)}),{payForRequest:A,paying:H}=te(),Y=c(()=>{var t,m;const n=Number(((t=o.value)==null?void 0:t.price)??0)-Number(((m=l.value)==null?void 0:m.wallet_balance)??0);return n<0?0:n}),D=()=>{var n;o.value&&A(o.value,i.params.host,((n=l.value)==null?void 0:n.wallet_balance)??0)};return K({title:"Payment"}),(n,t)=>{const m=O,G=Q,L=X,U=Z;return d(),u("div",se,[r(m,{class:"fixed top-20",to:`/${e(i).params.host}/${e(i).params.event_id}/make-a-request`},null,8,["to"]),r(U,{loading:e(C)==="pending"||e(T)==="pending",error:e(R)??e(V)},{default:F(()=>{var x,y,v,_,g,b,w,k,S,h,E,M,N,q;return[s("div",ne,[t[7]||(t[7]=s("div",{class:"text-primary text-center"},"Payment",-1)),t[8]||(t[8]=s("div",{class:"text-center font-display font-semibold text-3xl my-6"}," Make payment to submit your request ",-1)),s("div",oe,[s("div",ae,[t[0]||(t[0]=s("div",{class:"text-muted-foreground text-sm"},"Total amount",-1)),s("div",re," ₦"+a(("formatMoney"in n?n.formatMoney:e(p))(((x=e(o))==null?void 0:x.price)??0)),1)]),s("div",ie,[s("div",le,[t[1]||(t[1]=s("div",{class:"text-sm text-muted-foreground"},"Request",-1)),s("div",{class:$(("cn"in n?n.cn:e(j))("px-1 rounded-[26px] flex items-center gap-x-px text-xs min-w-[120px] max-h-6",((y=e(o))==null?void 0:y.type)==="song"?"bg-[#FFEE99]/20":"bg-[#FF99F1]/20"))},[r(ee,{name:((v=e(o))==null?void 0:v.type)==="song"?"music":"mic",class:"scale-50"},null,8,["name"]),s("div",null,a(((_=e(o))==null?void 0:_.type)==="song"?"SONG":"HYPE")+" REQUEST ",1)],2)]),((g=e(o))==null?void 0:g.type)==="hype"?(d(),u("div",me,[t[2]||(t[2]=s("div",{class:"text-sm text-muted-foreground"},"Hype",-1)),r(G,{content:((b=e(o))==null?void 0:b.description)??"",class:"max-w-[50%] text-right"},null,8,["content"])])):f("",!0),((w=e(o))==null?void 0:w.type)==="song"?(d(),u("div",de,[t[3]||(t[3]=s("div",{class:"text-sm text-muted-foreground"},"Title",-1)),s("div",null,a(((k=e(o))==null?void 0:k.song_title)??""),1)])):f("",!0),((S=e(o))==null?void 0:S.type)==="song"?(d(),u("div",ue,[t[4]||(t[4]=s("div",{class:"text-sm text-muted-foreground"},"Artsite",-1)),s("div",null,a(((h=e(o))==null?void 0:h.artist)??""),1)])):f("",!0),s("div",ce,[t[5]||(t[5]=s("div",{class:"text-sm text-muted-foreground"},"Your nickname",-1)),s("div",null,a(((E=e(o))==null?void 0:E.nickname)??((N=(M=e(o))==null?void 0:M.audience)==null?void 0:N.stage_name)??""),1)])]),s("div",pe,[s("div",fe,[t[6]||(t[6]=s("div",{class:"text-muted-foreground"},"Spin request balance",-1)),s("div",{class:$(("cn"in n?n.cn:e(j))(e(z)?"text-[#38F08D]":"text-[#E66840]"))}," ₦"+a(("formatMoney"in n?n.formatMoney:e(p))(((q=e(l))==null?void 0:q.wallet_balance)??0)),3)])]),r(L,{size:"lg",class:"relative -translate-y-7 w-full",onClick:D,loading:e(H)},{default:F(()=>[W(" PAY ₦"+a(("formatMoney"in n?n.formatMoney:e(p))(e(Y)??0)),1)]),_:1},8,["loading"])])])]}),_:1},8,["loading","error"])])}}});export{Me as default};
