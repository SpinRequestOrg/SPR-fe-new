import{_ as Z}from"./Bmu_YX42.js";import{_ as J}from"./CBGcTsFW.js";import{h as b,o as i,n as v,w as _,a as c,m as e,z as I,A as K,c as k,ad as Q,t as h,B as T,ae as z,b as n,q,j as R,d as D,Z as B,_ as G,k as W,l as X,r as Y,F as A,E as ee,y as te,D as ae,P as ne}from"./ZzYuc5FK.js";import{_ as se}from"./Bhj8JrWQ.js";import{a as H,_ as S,F as O}from"./CQnnwGri.js";import{c as oe,b as re,a as g}from"./-_7v7zer.js";import{u as P}from"./CEieA1CV.js";import{u as le}from"./B8K1_lBj.js";import{u as ie}from"./JJAh6i0j.js";import"./C_uAVEpq.js";import"./l26r7jI4.js";const ue=["name","value"],V=b({__name:"form-hidden-input",props:{name:{}},setup(f){return(t,m)=>(i(),v(e(H),{name:t.name,class:"relative h-0 invisible",as:"div"},{default:_(({value:u})=>[c("input",{type:"hidden",name:t.name,value:u},null,8,ue)]),_:1},8,["name"]))}}),de=["value"],me=b({__name:"textarea",props:I({label:{},state:{},type:{},name:{},id:{},placeholder:{},disabled:{type:Boolean}},{modelValue:{},modelModifiers:{}}),emits:I(["change","blur"],["update:modelValue"]),setup(f,{emit:t}){const m=z("relative rounded-lg border shadow-sm transition-colors bg-white/5 text-sm file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground focus-within:outline-none focus-within:ring-1",{variants:{state:{normal:"border-input focus-within:ring-ring",valid:"border-input focus-within:ring-input",error:"border-destructive focus-within:ring-destructive"}},defaultVariants:{state:"normal"}}),u=z("absolute text-sm font-medium top-3 left-3 -translate-y-1/2 label-text transition-all",{variants:{state:{normal:"text-muted-foreground",valid:"text-muted-foreground",error:"text-destructive"}},defaultVariants:{state:"normal"}}),o=K(f,"modelValue"),d=t,a=r=>{o.value=r.target.value,d("change",r)},p=f;return(r,l)=>(i(),k("div",{class:T(e(m)({state:r.state}))},[c("textarea",Q({...p,type:r.type,placeholder:p.placeholder||""},{value:o.value,onInput:a,onBlur:l[0]||(l[0]=s=>d("blur",s)),class:"flex rounded-[inherit] [&:focus_~_span.label-text]:!top-3 [&:placeholder-shown_~_span.label-text]:top-1/2 px-3 leading-6 w-full h-[56px] text-base pt-6 bg-transparent text-foreground transition-colors placeholder:text-transparent focus-visible:placeholder:text-muted-foreground focus-visible:outline-none disabled:cursor-not-allowed disabled:opacity-50 autofill:bg-transparent"}),null,16,de),c("span",{class:T(e(u)({state:r.state}))},h(r.label),3)],2))}}),pe={key:0,class:"text-sm text-destructive animate-in slide-in-from-top-1 absolute -bottom-5 font-semibold"},ce=b({__name:"form-textarea",props:{name:{},label:{},type:{},id:{},placeholder:{},disabled:{type:Boolean},showErrorOnTouch:{type:Boolean,default:!1}},setup(f){return(t,m)=>(i(),v(e(H),{name:t.name,class:"relative",as:"div"},{default:_(({value:u,handleChange:o,errorMessage:d,meta:a})=>[n(me,{"model-value":u,onChange:o,name:t.name,type:t.type,disabled:t.disabled,placeholder:t.placeholder,id:t.id,label:t.label,state:d&&a.touched?"error":"normal"},null,8,["model-value","onChange","name","type","disabled","placeholder","id","label","state"]),a.touched||t.showErrorOnTouch?(i(),k("div",pe,h(d),1)):q("",!0)]),_:1},8,["name"]))}}),L=oe({type:re().oneOf(["hype","song"]).required(),event_id:g().required(),nickname:g().optional()}),fe=L.shape({description:g().required("Hype description required"),nickname:g().required("Nickname required")}),_e=L.shape({artist:g().required("Artist name required"),song_title:g().required("Song name required")}),ve=b({__name:"hype-request-form",props:{request:{},event_id:{}},setup(f){const t=f,m=R(()=>({type:t.request.name,event_id:Number(t.event_id)})),{createEventRequest:u,creating:o}=P(),d=a=>{u(a)};return(a,p)=>(i(),v(e(O),{"validation-schema":e(fe),"initial-values":e(m),onSubmit:d,class:"space-y-7"},{default:_(()=>[n(V,{name:"event_id"}),n(V,{name:"type"}),n(ce,{name:"description",placeholder:"Enter hype description",label:"Tell us about your hype",type:"text"}),n(S,{name:"nickname",placeholder:"Enter your nickname",label:"nickname"}),n(G,{type:"submit",size:"lg",class:"max-w-full w-[400px] mx-auto !flex uppercase",loading:e(o)},{default:_(()=>[D(" Request Hype For ₦"+h(("formatMoney"in a?a.formatMoney:e(B))(a.request.price)),1)]),_:1},8,["loading"])]),_:1},8,["validation-schema","initial-values"]))}}),he=b({__name:"song-request-form",props:{request:{},event_id:{}},setup(f){const t=f,m=R(()=>({type:t.request.name,event_id:Number(t.event_id)})),{createEventRequest:u,creating:o}=P(),d=a=>{u(a)};return(a,p)=>(i(),v(e(O),{"validation-schema":e(_e),"initial-values":e(m),onSubmit:d,class:"space-y-7"},{default:_(()=>[n(V,{name:"event_id"}),n(V,{name:"type"}),n(S,{name:"song_title",placeholder:"Enter song title",label:"Song title",type:"text"}),n(S,{name:"artist",placeholder:"Enter artiste name",label:"Artiste",type:"text"}),n(S,{name:"nickname",placeholder:"Enter your nickname",label:"nickname (optional)"}),n(G,{type:"submit",size:"lg",class:"max-w-full w-[400px] mx-auto !flex uppercase",loading:e(o)},{default:_(()=>[D(" Request Song For ₦"+h(("formatMoney"in a?a.formatMoney:e(B))(a.request.price)),1)]),_:1},8,["loading"])]),_:1},8,["validation-schema","initial-values"]))}}),ye={class:"container pt-6 pb-20"},ge={class:"max-w-[640px] w-full mx-auto"},be={class:"flex items-center gap-x-1"},xe={class:"text-4xl font-bold text-primary tabular-nums"},qe={class:"text-2xl font-medium my-4 mb-2 capitalize"},ke={class:"text-muted-foreground"},Ie=b({__name:"make-a-request",setup(f){const t=W(),m=t.params.host,u=t.params.event_id,{data:o,error:d,status:a}=le(`/user/host/${m}`);X(o,l=>{var s,y,w;((w=(y=(s=l==null?void 0:l.data)==null?void 0:s.live_event)==null?void 0:y.types)==null?void 0:w.length)===1&&(p.value=l.data.live_event.types[0].name)});const p=Y(""),r=R(()=>{var l,s;return(s=(l=o.value)==null?void 0:l.data.live_event)==null?void 0:s.types.find(y=>y.name===p.value)});return ie({title:"Make A Request"}),(l,s)=>{const y=Z,w=J,j=ae,U=ne;return i(),k("div",ye,[n(y,{to:`/${e(m)}`},null,8,["to"]),n(se,{loading:e(a)==="pending",error:e(d)},{default:_(()=>{var E,M,F;return[c("div",ge,[s[1]||(s[1]=c("div",{class:"text-primary text-center text-lg"},"Make a request",-1)),s[2]||(s[2]=c("div",{class:"text-3xl font-semibold text-center font-display mt-2 mb-4"}," Tell me about your request ",-1)),(F=(M=(E=e(o))==null?void 0:E.data)==null?void 0:M.live_event)!=null&&F.types?(i(),v(U,{key:0,class:"grid grid-cols-[repeat(auto-fit,_minmax(305px,_1fr))] gap-6 my-6",modelValue:e(p),"onUpdate:modelValue":s[0]||(s[0]=$=>te(p)?p.value=$:null)},{default:_(()=>{var $,C,N;return[(i(!0),k(A,null,ee((N=(C=($=e(o))==null?void 0:$.data)==null?void 0:C.live_event)==null?void 0:N.types,x=>(i(),v(j,{class:"p-6 lg:p-8 mx-auto text-left ring ring-input bg-white/10 rounded-2xl transition-colors cursor-pointer data-[state='checked']:ring-primary hover:ring-primary/30",key:x.id,value:x.name},{default:_(()=>[c("div",be,[n(w,{name:"money"}),c("div",xe," ₦"+h(("formatMoney"in l?l.formatMoney:e(B))(x.price)),1)]),c("div",qe,h(x.name)+" request ",1),c("div",ke,h(x.name==="song"?"Request a song and i'll give you credit when it plays":"Steal the spotlight. Get a shout-out  for yourself or someone."),1)]),_:2},1032,["value"]))),128))]}),_:1},8,["modelValue"])):q("",!0),e(r)?(i(),k(A,{key:1},[e(r).name==="hype"?(i(),v(ve,{key:0,request:e(r),event_id:e(u)},null,8,["request","event_id"])):q("",!0),e(r).name==="song"?(i(),v(he,{key:1,request:e(r),event_id:e(u)},null,8,["request","event_id"])):q("",!0)],64)):q("",!0)])]}),_:1},8,["loading","error"])])}}});export{Ie as default};
