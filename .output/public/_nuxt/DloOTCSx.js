import{_ as $}from"./Ceiwx9J8.js";import{p as I,r as m,v as w,u as G,o as p,c,b as t,a as s,w as r,y as a,D as x,_ as g,d as u,A as b,s as E,E as K,G as O,P}from"./BYH92m9P.js";import{_ as N,F as z}from"./BYhwzVSq.js";import{_ as k}from"./BICbmJ3H.js";import{_ as C,X as F}from"./BBXfAjPL.js";import{c as j,a as y}from"./BqjAheMm.js";import"./BbCDls9e.js";const D=j({title:y().required("Event title required").min(5,"Title should be at least 5 characters long"),address:y().required("Event address required"),country:y().required("Event country required"),state:y().required("Event state required")}),H=["Abia","Adamawa","Akwa Ibom","Anambra","Bauchi","Bayelsa","Benue","Borno","Cross River","Delta","Ebonyi","Edo","Ekiti","Enugu","FCT - Abuja","Gombe","Imo","Jigawa","Kaduna","Kano","Katsina","Kebbi","Kogi","Kwara","Lagos","Nasarawa","Niger","Ogun","Ondo","Osun","Oyo","Plateau","Rivers","Sokoto","Taraba","Yobe","Zamfara"],U=()=>({all_countries:["Nigeria"],nigerian_states:H}),Y={class:"container pt-4 pb-20"},L={class:"max-w-full w-[640px] mx-auto mt-10"},J={class:"flex flex-col sm:flex-row gap-4 w-full"},M={key:0,class:"bg-white/5 rounded-2xl p-4 !mt-8 border animate-in slide-in-from-top-1"},W={class:"my-4 space-y-4"},X={key:0,class:"flex justify-between items-center"},Z={key:1,class:"flex justify-between items-center"},Q={key:0,class:"py-1 px-2 mt-8 border border-destructive bg-[#64200A] flex items-center rounded-md justify-between"},ie=I({__name:"create-event",setup(ee){const{all_countries:V,nigerian_states:A}=U(),n=m(void 0),l=m(100),i=m(100),_=m(!0),S=w(()=>!n.value||Number(l.value)<0||Number(i.value)<0),v=m(!1),q=w(()=>{switch(n.value){case"both":return[{name:"song",price:Number(l.value)},{name:"hype",price:Number(i.value)}];case"hype":return[{name:"hype",price:Number(i.value)}];case"song":return[{name:"song",price:Number(l.value)}];default:return[]}}),{$repo:{event:T}}=G(),R=async h=>{var f;const e={...h,types:q.value};try{v.value=!0;const o=await T.createEvent(e);v.value=!1,E({title:o.message,variant:"normal"}),o.data.id&&K("/dashboard")}catch(o){v.value=!1,E({title:((f=o.data)==null?void 0:f.message)??"Failed to create event",variant:"warning"}),console.error("FAILED TO CREATE EVENT",o)}};return(h,e)=>{const f=$,o=O,B=P;return p(),c("div",Y,[t(f,{to:"/dashboard"}),e[13]||(e[13]=s("div",{class:"text-3xl md:text-4xl text-center font-semibold font-display"}," Create event ",-1)),s("div",L,[t(a(z),{class:"space-y-6","validation-schema":a(D),onSubmit:R},{default:r(()=>[t(N,{name:"title",placeholder:"Enter event title",label:"Event title"}),t(N,{name:"address",placeholder:"Enter event address",label:"Address"}),s("div",J,[t(k,{options:a(V),name:"country",placeholder:"Choose event country",label:"Country",class:"w-full"},null,8,["options"]),t(k,{options:a(A),name:"state",placeholder:"Choose event state",label:"State",class:"w-full"},null,8,["options"])]),s("div",null,[e[7]||(e[7]=s("div",{class:"mb-3 font-medium"}," What type of request are you taking ",-1)),t(B,{class:"grid grid-cols-2 sm:grid-cols-3 gap-4 text-muted-foreground",name:"type",required:"",modelValue:a(n),"onUpdate:modelValue":e[0]||(e[0]=d=>x(n)?n.value=d:null)},{default:r(()=>[t(o,{"as-child":"",value:"song"},{default:r(()=>[t(g,{type:"button",variant:"outline",size:"lg",class:"ring-transparent bg-white/5 transition-colors ring-[1px] data-[state='checked']:ring-primary"},{default:r(()=>e[4]||(e[4]=[u(" Song ")])),_:1})]),_:1}),t(o,{"as-child":"",value:"hype"},{default:r(()=>[t(g,{type:"button",variant:"outline",size:"lg",class:"ring-transparent bg-white/5 transition-colors ring-[1px] data-[state='checked']:ring-primary"},{default:r(()=>e[5]||(e[5]=[u(" Hype ")])),_:1})]),_:1}),t(o,{"as-child":"",value:"both"},{default:r(()=>[t(g,{type:"button",variant:"outline",size:"lg",class:"col-span-2 sm:col-span-1 bg-white/5 ring-transparent transition-colors ring-[1px] data-[state='checked']:ring-primary"},{default:r(()=>e[6]||(e[6]=[u(" Song & Hype ")])),_:1})]),_:1})]),_:1},8,["modelValue"])]),a(n)?(p(),c("div",M,[e[11]||(e[11]=s("div",{class:"text-sm text-muted-foreground"}," Set your starting prices ",-1)),s("div",W,[a(n)=="both"||a(n)=="song"?(p(),c("div",X,[e[8]||(e[8]=s("div",{class:"text-2xl font-semibold"},[u(" Song "),s("span",{class:"hidden sm:inline"},"request")],-1)),t(C,{modelValue:a(l),"onUpdate:modelValue":e[1]||(e[1]=d=>x(l)?l.value=d:null),id:"SONG_PRICE",step:100},null,8,["modelValue"])])):b("",!0),a(n)=="both"||a(n)=="hype"?(p(),c("div",Z,[e[9]||(e[9]=s("div",{class:"text-2xl font-semibold"},[u(" Hype "),s("span",{class:"hidden sm:inline"},"request")],-1)),t(C,{modelValue:a(i),"onUpdate:modelValue":e[2]||(e[2]=d=>x(i)?i.value=d:null),id:"HYPE_PRICE",step:100},null,8,["modelValue"])])):b("",!0)]),a(_)?(p(),c("div",Q,[e[10]||(e[10]=s("div",{class:"text-sm sm:text-base"}," You can always change the price at any time during the event ",-1)),t(a(F),{class:"size-4 cursor-pointer",onClick:e[3]||(e[3]=d=>_.value=!1)})])):b("",!0)])):b("",!0),t(g,{class:"max-w-full w-[450px] !flex !mt-8 mx-auto border",size:"lg",disabled:a(S),loading:a(v)},{default:r(()=>e[12]||(e[12]=[u(" Create event ")])),_:1},8,["disabled","loading"])]),_:1},8,["validation-schema"])])])}}});export{ie as default};
