import{u as R,a3 as p,r as P,a0 as H,L as M,a4 as N,a5 as I,g as L,a6 as E,a7 as T,p as _,l as K,a8 as U,m as V,o as y,n as $,w as F,b as v,d as z,t as S,a9 as k,aa as W,ab as q,P as b,c as w,a as C,ac as G}from"./BLB5eLYR.js";import{L as J}from"./isthPvu_.js";import"./CG-7ofru.js";const Q=s=>s==="defer"||s===!1;function X(...s){var O;const r=typeof s[s.length-1]=="string"?s.pop():void 0;typeof s[0]!="string"&&s.unshift(r);let[t,d,e={}]=s;if(typeof t!="string")throw new TypeError("[nuxt] [asyncData] key must be a string.");if(typeof d!="function")throw new TypeError("[nuxt] [asyncData] handler must be a function.");const a=R(),h=d,D=()=>p.value,u=()=>a.isHydrating?a.payload.data[t]:a.static.data[t];e.server=e.server??!0,e.default=e.default??D,e.getCachedData=e.getCachedData??u,e.lazy=e.lazy??!1,e.immediate=e.immediate??!0,e.deep=e.deep??p.deep,e.dedupe=e.dedupe??"cancel";const o=e.getCachedData(t,a),f=o!=null;if(!a._asyncData[t]||!e.immediate){(O=a.payload._errors)[t]??(O[t]=p.errorValue);const l=e.deep?P:H;a._asyncData[t]={data:l(f?o:e.default()),pending:P(!f),error:M(a.payload._errors,t),status:P("idle"),_default:e.default}}const n={...a._asyncData[t]};delete n._default,n.refresh=n.execute=(l={})=>{if(a._asyncDataPromises[t]){if(Q(l.dedupe??e.dedupe))return a._asyncDataPromises[t];a._asyncDataPromises[t].cancelled=!0}if(l._initial||a.isHydrating&&l._initial!==!1){const c=l._initial?o:e.getCachedData(t,a);if(c!=null)return Promise.resolve(c)}n.pending.value=!0,n.status.value="pending";const m=new Promise((c,i)=>{try{c(h(a))}catch(g){i(g)}}).then(async c=>{if(m.cancelled)return a._asyncDataPromises[t];let i=c;e.transform&&(i=await e.transform(c)),e.pick&&(i=Z(i,e.pick)),a.payload.data[t]=i,n.data.value=i,n.error.value=p.errorValue,n.status.value="success"}).catch(c=>{if(m.cancelled)return a._asyncDataPromises[t];n.error.value=T(c),n.data.value=_(e.default()),n.status.value="error"}).finally(()=>{m.cancelled||(n.pending.value=!1,delete a._asyncDataPromises[t])});return a._asyncDataPromises[t]=m,a._asyncDataPromises[t]},n.clear=()=>Y(a,t);const x=()=>n.refresh({_initial:!0}),j=e.server!==!1&&a.payload.serverRendered;{const l=K();if(l&&!l._nuxtOnBeforeMountCbs){l._nuxtOnBeforeMountCbs=[];const i=l._nuxtOnBeforeMountCbs;N(()=>{i.forEach(g=>{g()}),i.splice(0,i.length)}),I(()=>i.splice(0,i.length))}j&&a.isHydrating&&(n.error.value||o!=null)?(n.pending.value=!1,n.status.value=n.error.value?"error":"success"):l&&(a.payload.serverRendered&&a.isHydrating||e.lazy)&&e.immediate?l._nuxtOnBeforeMountCbs.push(x):e.immediate&&x();const m=U();if(e.watch){const i=L(e.watch,()=>n.refresh());m&&E(i)}const c=a.hook("app:data:refresh",async i=>{(!i||i.includes(t))&&await n.refresh()});m&&E(c)}const B=Promise.resolve(a._asyncDataPromises[t]).then(()=>n);return Object.assign(B,n),B}function Y(s,r){r in s.payload.data&&(s.payload.data[r]=void 0),r in s.payload._errors&&(s.payload._errors[r]=p.errorValue),s._asyncData[r]&&(s._asyncData[r].data.value=void 0,s._asyncData[r].error.value=p.errorValue,s._asyncData[r].pending.value=!1,s._asyncData[r].status.value="idle"),r in s._asyncDataPromises&&(s._asyncDataPromises[r]&&(s._asyncDataPromises[r].cancelled=!0),s._asyncDataPromises[r]=void 0)}function Z(s,r){const t={};for(const d of r)t[d]=s[d];return t}const A=V({__name:"avatar",props:{initials:{default:""},image:{default:""}},setup(s){return(r,t)=>{const d=k,e=W,a=q;return y(),$(a,{class:"bg-muted inline-flex size-[40px] select-pointer items-center justify-center overflow-hidden rounded-full align-middle"},{default:F(()=>[v(d,{src:r.image,class:"h-full w-full object-cover"},null,8,["src"]),v(e,{class:"leading-1 flex h-full w-full items-center justify-center text-[15px] font-medium uppercase"},{default:F(()=>[z(S(r.initials),1)]),_:1})]),_:1})}}}),ee={key:0,class:"h-full w-full grid place-items-center pt-8"},ae={key:1,class:"container pt-8"},te={class:"flex gap-x-2 items-center"},se={class:"text-5xl font-display tracking-wide"},oe=V({__name:"profile",setup(s){const{$repo:r}=R(),{data:t,status:d,error:e}=X("FETCH-USER-PROFILE",()=>r.auth.fetchProfile()),a=b(()=>{var u,o,f,n;return((o=(u=t.value)==null?void 0:u.data)==null?void 0:o.stage_name)??((n=(f=t.value)==null?void 0:f.data)==null?void 0:n.email)}),h=b(()=>G(a.value??"")),D=b(()=>{var u,o;return(o=(u=t.value)==null?void 0:u.data)==null?void 0:o.profile_picture});return(u,o)=>{const f=A;return y(),w("div",null,[_(d)==="pending"?(y(),w("div",ee,[v(_(J),{class:"size-6 animate-spin"})])):(y(),w("div",ae,[C("div",te,[v(f,{class:"bg-[#FF99F1] size-[56px] text-background text-xl font-bold",initials:_(h),image:_(D)},null,8,["initials","image"]),C("div",se,[o[0]||(o[0]=z(" Welcome, ")),C("b",null,S(_(a)),1)])])]))])}}});export{oe as default};
