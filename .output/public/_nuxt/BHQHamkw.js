import{_ as de}from"./CKhQwfaN.js";import{_ as ce}from"./opsdgRFH.js";import{_ as ue}from"./BivVr8q3.js";import{_ as pe}from"./DsjFwCE6.js";import{_ as Q,F as me,b as fe}from"./Bp4JYMQT.js";import{_ as _e}from"./C1aUYfsN.js";import{f as W,am as ge,y as oe,e as ve,h as H,i as be,r as V,o as k,n as A,w as b,ab as se,b as l,d as j,_ as D,a as e,m as t,s as S,x as ye,R as we,S as xe,c as L,t as C,L as ne,q as le,j as q,an as ke,a6 as he}from"./DqT6-DoZ.js";import{_ as $e}from"./B7kqFdBF.js";import{_ as ie}from"./DjZAVge1.js";import{C as Ve}from"./CcStMmz-.js";import{b as Se}from"./hc7f49Gw.js";import{u as re}from"./MgyHKBzv.js";import{C as Ee,a as Fe}from"./Ds8YUZTF.js";import{p as Ce}from"./DDvBqTbZ.js";import{u as Ue}from"./49JWm8FD.js";import"./DxOPiqzk.js";import"./Co8Y9_xh.js";import"./DUXXyp4T.js";import"./Cpj98o6Y.js";const De="$s";function Pe(...h){const _=typeof h[h.length-1]=="string"?h.pop():void 0;typeof h[0]!="string"&&h.unshift(_);const[m,o]=h;if(!m||typeof m!="string")throw new TypeError("[nuxt] [useState] key must be a string: "+m);if(o!==void 0&&typeof o!="function")throw new Error("[nuxt] [useState] init must be a function: "+o);const g=De+m,u=W(),d=ge(u.payload.state,g);if(d.value===void 0&&o){const y=o();if(oe(y))return u.payload.state[g]=y,y;d.value=y}return d}/**
 * @license lucide-vue-next v0.447.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Re=ve("UploadIcon",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),Ae={class:"p-6"},Le={class:"pt-6"},Ne=H({__name:"password-change",setup(h){const{$repo:{auth:_}}=W(),{logOut:m}=be(),o=V(!1),g=async u=>{var d,y;try{o.value=!0;const r=await _.changePassword(u),f=r==null?void 0:r.message;S({title:"Success",description:f,variant:"normal"}),o.value=!1,m(()=>ye("/login"))}catch(r){o.value=!1,S({title:"Failed",description:((d=r==null?void 0:r.data)==null?void 0:d.message)??"Invalid credentials",variant:"warning"}),console.error("ERROR LOGGING IN",(y=r==null?void 0:r.data)==null?void 0:y.message)}};return(u,d)=>{const y=ie;return k(),A(y,{size:"md"},{trigger:b(()=>[se(u.$slots,"default",{},()=>[l(D,{variant:"secondary",class:"self-center"},{default:b(()=>d[0]||(d[0]=[j("CHANGE")])),_:1})])]),heading:b(()=>d[1]||(d[1]=[e("div",{class:"font-display text-2xl font-medium"},"Change password",-1)])),default:b(()=>[e("div",Ae,[l(t(me),{class:"space-y-6 mt-2","validation-schema":t(Ve),onSubmit:g},{default:b(()=>[l(Q,{name:"old_password",label:"Old password",placeholder:"Enter your old password",type:"password"}),l(Q,{name:"password",label:"New password",placeholder:"Enter your new password",type:"password"}),l(Q,{name:"password_confirmation",label:"Confirm password",placeholder:"Confirm your new password",type:"password"}),e("div",Le,[l(D,{size:"lg",type:"submit",class:"w-full",loading:t(o)},{default:b(()=>d[2]||(d[2]=[j(" SAVE PASSWORD ")])),_:1},8,["loading"])])]),_:1},8,["validation-schema"])])]),_:3})}}}),Oe=()=>{const{$repo:{auth:h}}=W(),_=V(!1),m=V(),o=V(),g=V(),u=V();return{previewFile:r=>{var f;try{if(!r.type.startsWith("image/")){S({title:"Upload only image",variant:"warning"});return}const x=new FileReader;x.onload=i=>{var s;u.value=r,g.value=(s=i.target)==null?void 0:s.result},x.onerror=i=>{var s,$;u.value=void 0,S({title:"Preview Error",description:(($=(s=i.target)==null?void 0:s.error)==null?void 0:$.message)??"Failed to preview",variant:"warning"})},x.readAsDataURL(r)}catch(x){u.value=void 0,m.value=void 0,_.value=!1;const i=x;o.value=i,S({title:"Preview Error",description:((f=i==null?void 0:i.data)==null?void 0:f.message)??"Failed to preview",variant:"warning"})}},uploadFile:async(r,f)=>{var x;try{const i=f||u.value;if(!i||!i.type.startsWith("image/")){S({title:i?"Upload only image":"Upload a file",variant:"warning"});return}const s=new FileReader;s.onload=v=>{var c;g.value=(c=v.target)==null?void 0:c.result},s.readAsDataURL(i);const $=new FormData;$.append("profile_picture",i,i.name),_.value=!0;const U=await h.uploadFile($);_.value=!1,U.data&&(m.value=U.data,r==null||r(U.data))}catch(i){m.value=void 0,_.value=!1;const s=i;o.value=s,S({title:"Upload Error",description:((x=s==null?void 0:s.data)==null?void 0:x.message)??"Failed to upload",variant:"warning"})}},uploading:_,upload_error:o,upload_preview:g,uploaded_url:m}},ze={class:"p-6"},Be=["src"],Te={key:1,class:"space-y-4 place-center w-full grid place-items-center text-center relative"},Ie={class:"space-y-2"},je={class:"text-2xl font-medium font-display"},Ge={key:0,class:"grid grid-cols-2 gap-4 mt-6 items-center"},te=H({__name:"upload-photo",emits:["uploaded"],setup(h,{emit:_}){const m=_,o=V(!1),g=V(),{previewFile:u,uploadFile:d,uploading:y,upload_error:r,upload_preview:f,uploaded_url:x}=Oe(),i=v=>{v!=null&&v.length&&u(v[0])},s=v=>{const N=v.target.files;i(N)},$=()=>{d(v=>{m("uploaded",v),o.value=!1,S({title:"Done",description:"Picture uploaded"})})},{isOverDropZone:U}=Se(g,{onDrop:i,dataTypes:["image/jpeg","image/jpg","image/png"],multiple:!1,preventDefaultForUnhandled:!1});return(v,c)=>{const N=ie;return k(),A(N,{size:"md",modelValue:t(o),"onUpdate:modelValue":c[0]||(c[0]=n=>oe(o)?o.value=n:null),controlled:""},{heading:b(()=>c[1]||(c[1]=[e("div",{class:"font-display text-2xl font-medium"},"Upload photo",-1)])),trigger:b(()=>[se(v.$slots,"default",{},()=>[l(D,{variant:"secondary",class:"w-full"},{default:b(()=>c[2]||(c[2]=[j("EDIT")])),_:1})])]),default:b(()=>[e("div",ze,[e("div",{class:we(("cn"in v?v.cn:t(xe))("max-w-full w-[410px] mx-auto aspect-[1.42] border border-dashed rounded-lg relative",t(U)?" border-primary":" border-input")),ref_key:"dropZoneRef",ref:g},[t(f)?(k(),L("img",{key:0,src:t(f),alt:"profile-picture",class:"w-full h-full object-contain rounded-[inherit]"},null,8,Be)):(k(),L("div",Te,[l(t(Re),{class:"size-8 text-muted-foreground"}),e("div",Ie,[e("div",je,C(t(U)?"Drop picture":" Drag and drop picture"),1),c[3]||(c[3]=e("div",{class:"text-muted-foreground text-sm"}," JPEG, or PNG file with the max size of 3MB ",-1))])]))],2),t(f)?(k(),L("div",Ge,[l(D,{variant:"secondary",size:"lg",class:"w-full relative"},{default:b(()=>c[4]||(c[4]=[e("label",{for:"upload",class:"absolute inset-0 cursor-pointer"},[e("div",{class:"place-center"},"CHANGE PHOTO")],-1)])),_:1}),l(D,{size:"lg",onClick:$,loading:t(y)},{default:b(()=>c[5]||(c[5]=[j(" SAVE ")])),_:1},8,["loading"])])):(k(),A(D,{key:1,variant:"secondary",size:"lg",class:"mt-6 w-full relative"},{default:b(()=>c[6]||(c[6]=[e("label",{for:"upload",class:"absolute inset-0 cursor-pointer"},[e("div",{class:"place-center"},"CLICK TO UPLOAD FILE")],-1)])),_:1})),e("input",{type:"file",id:"upload",class:"hidden",accept:".jpeg, .jpg, .png",onChange:s},null,32)])]),_:3},8,["modelValue"])}}}),Me={class:"bg-white/5 rounded-3xl border p-6"},qe={class:"text-2xl font-semibold"},We={class:"size-[192px] mx-auto my-6 grid place-items-center"},He=["src"],Qe={class:"overflow-hidden text-ellipsis line-clamp-1"},Ze=["download","href"],Ke=H({__name:"qr-card",props:{id:{},name:{},link:{},qr:{}},setup(h){const _=h,m=V(!1),o=async()=>{await navigator.clipboard.writeText(_.link),m.value=!0,await Ce(1200),m.value=!1},{status:g,data:u}=re(`/qrcode/${_.id}`);return(d,y)=>{var f,x,i;const r=D;return k(),L("div",null,[e("div",Me,[e("div",qe,C(d.name),1),e("div",We,[t(g)==="pending"?(k(),A(t(ne),{key:0,class:"size-4 animate-spin"})):(f=t(u))!=null&&f.data?(k(),L("img",{key:1,src:(x=t(u))==null?void 0:x.data,alt:"QR-CODE",class:"w-full h-full object-cover"},null,8,He)):le("",!0)]),e("div",{class:"border rounded-full bg-white/5 relative px-4 py-2 flex justify-between items-center cursor-pointer hover:bg-white/10",onClick:o},[e("div",Qe,C(d.link),1),t(m)?(k(),A(t(Ee),{key:0,class:"size-4"})):(k(),A(t(Fe),{key:1,class:"size-4"}))])]),l(r,{size:"lg",class:"w-full mt-6 relative",disabled:!((i=t(u))!=null&&i.data)},{default:b(()=>{var s;return[e("a",{download:`${d.name}-spin-request-QR`,href:(s=t(u))==null?void 0:s.data,class:"inset-0 absolute grid place-items-center"}," DOWNLOAD QR CODE ",8,Ze)]}),_:1},8,["disabled"])])}}}),Je={class:"container pb-20"},Ye={class:"flex gap-x-2 items-center fixed top-24"},Xe={class:"grid md:grid-cols-[1fr_348px] gap-6 mt-20"},ea={class:"space-y-4"},aa={class:"border bg-white/5 p-6 rounded-2xl grid lg:grid-cols-[150px_1fr_126px] xl:grid-cols-[200px_1fr_126px] gap-6"},ta={class:"space-y-6"},oa={class:"flex items-center gap-x-2"},sa={class:"space-y-2"},na={class:"lg:hidden"},la={class:"hidden lg:block"},ia={class:"border bg-white/5 p-6 rounded-2xl grid lg:grid-cols-[150px_1fr_126px] xl:grid-cols-[200px_1fr_126px] gap-4"},ra={class:"flex flex-wrap gap-4 items-center"},da={class:"flex items-center gap-2"},ca={class:"flex items-center gap-2"},ua={class:"flex items-center gap-2"},pa={class:"flex items-center gap-2"},ma={class:"border bg-white/5 p-6 rounded-2xl grid lg:grid-cols-[150px_1fr_126px] xl:grid-cols-[200px_1fr_126px] gap-4"},fa={class:"space-y-4"},_a={class:"grid grid-cols-[repeat(auto-fit,_minmax(266px,_1fr))] gap-4"},ga={class:"border bg-white/5 p-6 rounded-2xl grid lg:grid-cols-[150px_1fr_126px] xl:grid-cols-[200px_1fr_126px] gap-6"},va={class:"border bg-white/5 p-6 rounded-2xl grid lg:grid-cols-[150px_1fr_126px] xl:grid-cols-[200px_1fr_126px] gap-4"},ba={class:"space-y-4"},ya={class:"flex justify-end"},wa={key:0,class:"w-full aspect-square rounded-3xl grid place-items-center border bg-white/5"},Ta=H({__name:"profile",setup(h){var c,N;const{$config:{public:{APP_BASE_URL:_}},$repo:{auth:m}}=W(),{data:o,status:g,error:u,refresh:d}=re("/user"),y=q(()=>{var n,a,w,E;return((a=(n=o.value)==null?void 0:n.data)==null?void 0:a.stage_name)??((E=(w=o.value)==null?void 0:w.data)==null?void 0:E.email)}),r=q(()=>he(y.value??"")),f=V(((N=(c=o.value)==null?void 0:c.data)==null?void 0:N.profile_picture)??""),x=q(()=>{var n,a;return((a=(n=o.value)==null?void 0:n.data)==null?void 0:a.stage_name)??""}),i=q(()=>{var n,a;return`${_}/${((a=(n=o.value)==null?void 0:n.data)==null?void 0:a.slug)??""}`}),s=Pe("USER-PROFILE",()=>{var n,a,w,E,P,F,R,O,G,M,z,B,T,I,p,Z,K,J,Y,X,ee,ae;return{user:{name:((a=(n=o.value)==null?void 0:n.data)==null?void 0:a.stage_name)??"",bio:((E=(w=o.value)==null?void 0:w.data)==null?void 0:E.bio)??"",dob:((F=(P=o.value)==null?void 0:P.data)==null?void 0:F.dob)??"",gender:((O=(R=o.value)==null?void 0:R.data)==null?void 0:O.gender)??"",country:((M=(G=o.value)==null?void 0:G.data)==null?void 0:M.country)??""},bank_account:{bank_name:((T=(B=(z=o.value)==null?void 0:z.data)==null?void 0:B.bank_account)==null?void 0:T.bank_name)??"",account_name:((Z=(p=(I=o.value)==null?void 0:I.data)==null?void 0:p.bank_account)==null?void 0:Z.account_name)??"",account_number:((Y=(J=(K=o==null?void 0:o.value)==null?void 0:K.data)==null?void 0:J.bank_account)==null?void 0:Y.account_number)??"",country:((ae=(ee=(X=o==null?void 0:o.value)==null?void 0:X.data)==null?void 0:ee.bank_account)==null?void 0:ae.country)??""}}});ke(()=>{var a,w,E,P,F;const n=(a=o.value)==null?void 0:a.data;n&&(f.value=(n==null?void 0:n.profile_picture)??"",s.value.user.bio=(n==null?void 0:n.bio)??"",s.value.user.country=n.country??"",s.value.user.dob=n.dob??"",s.value.user.gender=n.gender??"",s.value.user.name=n.stage_name??"",s.value.bank_account.account_name=((w=n.bank_account)==null?void 0:w.account_name)??"Rilwan",s.value.bank_account.account_number=((E=n.bank_account)==null?void 0:E.account_number)??"",s.value.bank_account.bank_name=((P=n.bank_account)==null?void 0:P.bank_name)??"",s.value.bank_account.country=((F=n.bank_account)==null?void 0:F.country)??"Nigeria")});const $=V(!1),U=()=>{const n=[{field:"bank_name",message:"Select your bank name to continue"},{field:"account_number",message:"Enter your account_number to continue"},{field:"account_name",message:"Enter your account name to continue"}];for(const a of n)if(!s.value.bank_account[a.field])return S({title:a.message,variant:"warning"}),!1;return!0},v=async()=>{var n;try{if(!U())return;$.value=!0;const w=await m.updateProfile(s.value);$.value=!1,console.log({response:w}),w.data&&(S({title:"Updated",description:w.message}),d())}catch(a){$.value=!1,S({title:"Failed",description:((n=a.data)==null?void 0:n.message)??"Failed to update profile",variant:"warning"})}};return Ue({title:"My Profile"}),(n,a)=>{const w=de,E=ce,P=ue,F=pe,R=fe,O=_e,G=D,M=$e;return k(),L("div",Je,[e("div",Ye,[l(w,{to:"/"}),a[9]||(a[9]=e("div",{class:"text-2xl font-medium font-display"},"My Profile",-1))]),l(M,{loading:t(g)==="pending",error:t(u)},{default:b(()=>{var z,B,T,I;return[e("div",Xe,[e("div",ea,[e("div",aa,[a[10]||(a[10]=e("div",{class:"font-semibold"},"Details",-1)),e("div",ta,[e("div",oa,[l(E,{image:t(f),initials:t(r),class:"!rounded-xl !size-[64px]"},null,8,["image","initials"]),e("div",sa,[e("div",null,C((z=t(o))==null?void 0:z.data.stage_name),1),e("div",null,C((B=t(o))==null?void 0:B.data.email),1)])]),e("div",na,[l(te,{onUploaded:a[0]||(a[0]=p=>f.value=p)})]),l(P,{label:"Bio",placeholder:"Tell your audience about yourself",class:"min-h-[80px]",modelValue:t(s).user.bio,"onUpdate:modelValue":a[1]||(a[1]=p=>t(s).user.bio=p)},null,8,["modelValue"])]),e("div",la,[l(te,{onUploaded:a[2]||(a[2]=p=>f.value=p)})])]),e("div",ia,[a[15]||(a[15]=e("div",{class:"font-semibold"},"Stats",-1)),e("div",ra,[e("div",da,[l(F,{name:"account_circle"}),a[11]||(a[11]=e("div",{class:"flex items-center gap-1"},[e("span",{class:"font-semibold"},C(0)),e("span",{class:"text-muted-foreground"},"FOLLOWERS")],-1))]),e("div",ca,[l(F,{name:"celebration"}),a[12]||(a[12]=e("div",{class:"flex items-center gap-1"},[e("span",{class:"font-semibold"},C(12)),e("span",{class:"text-muted-foreground"},"EVENTS")],-1))]),e("div",ua,[l(F,{name:"genres"}),a[13]||(a[13]=e("div",{class:"flex items-center gap-1"},[e("span",{class:"font-semibold"},C(4)),e("span",{class:"text-muted-foreground"},"REQUESTS")],-1))]),e("div",pa,[l(F,{name:"genres"}),a[14]||(a[14]=e("div",{class:"flex items-center gap-1"},[e("span",{class:"font-semibold"},C(2)),e("span",{class:"text-muted-foreground"},"FUFILLED")],-1))])])]),e("div",ma,[a[16]||(a[16]=e("div",{class:"font-semibold"},"Bio Data",-1)),e("div",fa,[e("div",_a,[l(R,{type:"date",label:"Date of birth",modelValue:t(s).user.dob,"onUpdate:modelValue":a[3]||(a[3]=p=>t(s).user.dob=p)},null,8,["modelValue"]),l(O,{options:["male","female"],placeholder:"Select your gender",label:"Gender",modelValue:t(s).user.gender,"onUpdate:modelValue":a[4]||(a[4]=p=>t(s).user.gender=p)},null,8,["modelValue"])]),l(O,{options:["Nigeria"],placeholder:"Select your country of residence",label:"Country",modelValue:t(s).user.country,"onUpdate:modelValue":a[5]||(a[5]=p=>t(s).user.country=p)},null,8,["modelValue"])])]),e("div",ga,[a[17]||(a[17]=e("div",{class:"font-semibold"},"Password",-1)),l(R,{placeholder:"Your password",label:"Password",type:"password"}),l(Ne)]),e("div",va,[a[18]||(a[18]=e("div",{class:"space-y-2"},[e("div",{class:"font-semibold"},"Bank Account"),e("div",{class:"text-muted-foreground"}," This is where we will transfer your withdrawals to, make sure its a valid account ")],-1)),e("div",ba,[l(O,{placeholder:"Select your bank",label:"Bank",options:["GT Bank","Access PLC"],modelValue:t(s).bank_account.bank_name,"onUpdate:modelValue":a[6]||(a[6]=p=>t(s).bank_account.bank_name=p)},null,8,["modelValue"]),l(R,{placeholder:"Enter your bank account",label:"Account Number",modelValue:t(s).bank_account.account_number,"onUpdate:modelValue":a[7]||(a[7]=p=>t(s).bank_account.account_number=p)},null,8,["modelValue"]),l(R,{label:"Account Name",disabled:"",modelValue:t(s).bank_account.account_name,"onUpdate:modelValue":a[8]||(a[8]=p=>t(s).bank_account.account_name=p)},null,8,["modelValue"])])]),e("div",ya,[l(G,{size:"lg",onClick:v,loading:t($)},{default:b(()=>a[19]||(a[19]=[j(" Save Changes ")])),_:1},8,["loading"])])]),e("div",null,[t(g)==="pending"?(k(),L("div",wa,[l(t(ne),{class:"size-5 animate-spin"})])):(T=t(o))!=null&&T.data.id?(k(),A(Ke,{key:1,name:t(x),link:t(i),id:(I=t(o))==null?void 0:I.data.id},null,8,["name","link","id"])):le("",!0)])])]}),_:1},8,["loading","error"])])}}});export{Ta as default};
