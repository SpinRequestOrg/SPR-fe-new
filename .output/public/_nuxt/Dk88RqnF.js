import{_ as R}from"./Ceiwx9J8.js";import{_ as w,F as S}from"./BYhwzVSq.js";import{p as b,u as k,r as C,x as B,o as f,c as E,b as n,a as l,w as _,_ as N,y as e,z as F,A as P,t as $,s as x,B as z,L as A}from"./BYH92m9P.js";import{R as T}from"./h_O2H-HD.js";import"./BbCDls9e.js";import"./BqjAheMm.js";const V={class:"container pt-8"},q={class:"w-[400px] max-w-full mx-auto"},j=b({__name:"reset-password",setup(D){var m,c;const{$repo:{auth:g}}=k(),a=C(!1),t=B(),d=(m=t==null?void 0:t.query)==null?void 0:m.token,y=decodeURIComponent((c=t==null?void 0:t.query)==null?void 0:c.email),h=async({password:p,password_confirmation:o})=>{var r,u;try{const s={password:p,password_confirmation:o,token:d,email:y};a.value=!0;const i=await g.resetPassword(s),v=i==null?void 0:i.message;x({title:"Success",description:v,variant:"normal"}),z().push("/login"),a.value=!1}catch(s){a.value=!1,x({title:"Failed",description:((r=s==null?void 0:s.data)==null?void 0:r.message)??"Failed to send reset link",variant:"warning"}),console.error("ERROR RESETTING PASSWORD",(u=s==null?void 0:s.data)==null?void 0:u.message)}};return(p,o)=>{const r=R;return f(),E("div",V,[n(r,{to:"/login"}),o[0]||(o[0]=l("div",{class:"text-4xl lg:text-5xl font-semibold my-4 text-center max-w-[595px] mx-auto"}," Change password ",-1)),o[1]||(o[1]=l("div",{class:"text-muted-foreground text-center mb-6"}," Create a new password ",-1)),l("div",q,[n(e(S),{"validation-schema":e(T),onSubmit:h,class:"space-y-8"},{default:_(()=>[n(w,{type:"password",name:"password",placeholder:"Enter your new password",label:"Set new password"}),n(w,{type:"password",name:"password_confirmation",placeholder:"Confirm password",label:"Confirm password"}),n(N,{class:"w-full flex mt-6",size:"lg",disabled:e(a)||!e(d)},{default:_(()=>[e(a)?(f(),F(e(A),{key:0,class:"size-4 animate-spin mr-2"})):P("",!0),l("span",null,$(e(a)?"Please wait":"Reset password"),1)]),_:1},8,["disabled"])]),_:1},8,["validation-schema"])])])}}});export{j as default};
