import{_ as S}from"./C1Rx0Rvu.js";import{h as w,f as E,i as k,r as $,o as c,p as g,w as l,a as s,b as o,n as r,L as B,v as F,t as V,_ as A,s as v,x as C,m as G,c as I,y as R,d as m}from"./CmKmz2PA.js";import{_ as y,F as T}from"./DK6ykJIv.js";const O=["onSubmit"],P=w({__name:"login-form",setup(h){const{$repo:p}=E(),{saveAuthUser:t}=k(),a=$(!1),u=async({email:n,password:_})=>{var i,f,x;const d={email:n,password:_};try{a.value=!0;const e=await p.auth.loginUser(d),N=e==null?void 0:e.message;v({title:"Success",description:N,variant:"normal"}),t(e.data.token,e.data.user),a.value=!1;const L=((i=e==null?void 0:e.data)==null?void 0:i.role)==="host"?"/dashboard":"/audience";return C(L)}catch(e){a.value=!1,v({title:"Failed",description:((f=e==null?void 0:e.data)==null?void 0:f.message)??"Invalid credentials",variant:"warning"}),console.error("ERROR LOGGING IN",(x=e==null?void 0:e.data)==null?void 0:x.message)}},b={email:n=>n?!0:"Enter your email",password:n=>n?!0:"Enter your password"};return(n,_)=>(c(),g(r(T),{"validation-schema":b,as:"div"},{default:l(({handleSubmit:d})=>[s("form",{onSubmit:i=>d(i,u),class:"space-y-7"},[o(y,{name:"email",placeholder:"Enter your email here",label:"Email"}),o(y,{name:"password",placeholder:"Enter your password here",type:"password",label:"Password"}),o(A,{class:"w-full",type:"submit",size:"lg",disabled:r(a)},{default:l(()=>[r(a)?(c(),g(r(B),{key:0,class:"animate-spin mr-2"})):F("",!0),s("span",null,V(r(a)?"Please wait...":"Submit"),1)]),_:1},8,["disabled"])],40,O)]),_:1}))}}),U={class:"h-full"},j={class:"max-w-[90%] mx-auto w-[400px]"},z={class:"flex justify-center gap-x-4 mt-2"},D={class:"flex gap-x-2"},H=w({__name:"login",setup(h){return G({title:"Login"}),(p,t)=>{const a=S,u=R;return c(),I("div",U,[o(u,{name:"auth"},{default:l(()=>[s("div",null,[t[3]||(t[3]=s("div",{class:"text-primary text-center mb-2 text-xl"},"Login",-1)),t[4]||(t[4]=s("div",{class:"text-4xl lg:text-5xl font-semibold my-4 text-center max-w-[595px] mx-auto font-display"}," Welcome, Log in to your account ",-1)),s("div",j,[o(P),s("div",z,[o(a,{to:"/forgot-password",class:"underline hover:no-underline ml-1"},{default:l(()=>t[0]||(t[0]=[m("Forgot password")])),_:1}),s("div",D,[t[2]||(t[2]=m(" Not a user? ")),o(a,{to:"/signup",class:"underline hover:no-underline"},{default:l(()=>t[1]||(t[1]=[m(" Sign up ")])),_:1})])])])])]),_:1})])}}});export{H as default};
