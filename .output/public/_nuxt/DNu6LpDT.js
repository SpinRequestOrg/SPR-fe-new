import{_ as B}from"./Ceiwx9J8.js";import{_ as F}from"./BbzXTmeu.js";import{p as E,H as L,I as P,r as C,o as f,z as V,w as a,b as e,a9 as w,_ as v,d as _,a as l,J as A,y as m,c as x,A as $,D as S,a8 as U,aa as M,ab as R,ac as I,ad as O,ae as j,af as H,ag as X,ah as Y,t as T,g as q,u as N,F as J,K,s as z,L as W,x as G,E as Q}from"./BYH92m9P.js";import{X as Z,_ as ee}from"./BBXfAjPL.js";import{u as te}from"./B4xmjUSy.js";import"./BbCDls9e.js";import"./DDMv6X7i.js";const ae={key:0,class:"absolute left-0 right-0 h-[0.5px] bg-slate-300/20 top-[46px]"},se=E({__name:"modal",props:L({showClose:{type:Boolean,default:!0},size:{default:"md"}},{modelValue:{type:Boolean},modelModifiers:{}}),emits:["update:modelValue"],setup(g){const p=U("content fixed bg-gray-900 top-[50%] left-[50%] w-[90vw] translate-x-[-50%] translate-y-[-50%] rounded-xl bg-background p-[25px] shadow-[hsl(206_22%_7%_/_35%)_0px_10px_38px_-10px,_hsl(206_22%_7%_/_20%)_0px_10px_20px_-15px] focus:outline-none z-[99]",{variants:{size:{xl:"max-w-[4xl] max-h-[95vh]",lg:"max-w-3xl max-h-[85vh]",md:"max-w-xl max-h-[75vh]",sm:"max-w-[500px] max-h-[55vh]"}},defaultVariants:{size:"lg"}}),c=P(g,"modelValue"),s=C(c.value),i=()=>{s.value=!s.value};return(u,t)=>{const r=M,n=R,d=I,o=O,b=j,D=H,y=X,h=Y;return f(),V(h,{open:m(s),"onUpdate:open":[t[0]||(t[0]=k=>S(s)?s.value=k:null),t[1]||(t[1]=k=>c.value=k)]},{default:a(()=>[e(r,{"as-child":""},{default:a(()=>[w(u.$slots,"trigger",{},()=>[e(v,{variant:"outline"},{default:a(()=>t[2]||(t[2]=[_("Open")])),_:1})])]),_:3}),e(y,null,{default:a(()=>[e(n,{class:"bg-foreground/10 data-[state=open]:animate-overlayShow fixed inset-0 z-[100]"}),e(D,{class:"[&[data-state='open']_.content]:animate-contentShow [&[data-state='open']_.header]:slide-in-from-top-1"},{default:a(()=>[l("div",{class:A(m(p)({size:u.size}))},[u.showClose?(f(),x("div",ae)):$("",!0),u.showClose?(f(),V(d,{key:1,class:"text-foreground/60 hover:bg-foreground/10 focus:shadow-foreground/50 absolute top-[10px] right-[10px] inline-flex h-[25px] w-[25px] appearance-none items-center justify-center rounded-full focus:shadow-[0_0_0_2px] focus:outline-none","aria-label":"Close"},{default:a(()=>[e(m(Z))]),_:1})):$("",!0),l("div",null,[e(o,null,{default:a(()=>[w(u.$slots,"title",{},()=>[t[3]||(t[3]=l("div",{class:"sr-only"},"Modal Title",-1))])]),_:3}),e(b,null,{default:a(()=>[w(u.$slots,"description",{},()=>[t[4]||(t[4]=l("div",{class:"sr-only"},"Modal Description",-1))])]),_:3}),w(u.$slots,"default",{toggle:i},()=>[t[5]||(t[5]=_("Modal Content"))])])],2)]),_:3})]),_:3})]),_:3},8,["open"])}}}),oe={class:"py-10 text-2xl font-medium text-center font-display"},ne={class:"flex items-center gap-4"},le=E({__name:"confirm-dialog",props:{message:{default:"Are you sure you want to continue?"},closeOnConfirm:{type:Boolean,default:!0},onConfirm:{}},setup(g){const p=g,c=s=>{var i;(i=p.onConfirm)==null||i.call(p),p.closeOnConfirm&&(s==null||s())};return(s,i)=>{const u=se;return f(),V(u,{size:"sm"},{trigger:a(()=>[w(s.$slots,"default",{},()=>[e(v,{variant:"destructive"},{default:a(()=>i[0]||(i[0]=[_("Confirm")])),_:1})])]),default:a(({toggle:t})=>[l("div",null,[l("div",oe,T(s.message),1),l("div",ne,[e(v,{variant:"destructive",class:"w-full",onClick:r=>c(t)},{default:a(()=>i[1]||(i[1]=[_(" Yes ")])),_:2},1032,["onClick"]),e(v,{variant:"outline",class:"w-full",onClick:t},{default:a(()=>i[2]||(i[2]=[_(" No ")])),_:2},1032,["onClick"])])])]),_:3})}}}),ie={class:"w-full border rounded-3xl bg-white/5 px-6 py-4 relative"},re={key:0,class:"absolute inset-0 grid place-items-center bg-background/65 rounded-[inherit]"},de={class:"space-y-6 my-8"},ue={class:"text-lg text-muted-foreground capitalize min-w-fit"},pe=E({__name:"event-rate-card",props:{services:{},onUpdate:{type:Function}},setup(g){const p=g,c=C(!1),s=C([]);q(()=>p.services,r=>{s.value=r},{immediate:!0});const{$repo:{event:i}}=N(),u=async(r,n)=>await i.updateEventPrice(r,n),t=async()=>{var r;try{c.value=!0;const n=await Promise.all(s.value.map(d=>u(d.id,d.price)));c.value=!1,z({title:"Prices updated"})}catch(n){c.value=!1,z({title:((r=n==null?void 0:n.data)==null?void 0:r.message)??"Failed to update prices",variant:"warning"}),console.error("FAILED TO UPDATE PRICES",n)}};return(r,n)=>(f(),x("div",ie,[m(c)?(f(),x("div",re,[e(m(W),{class:"size-5 animate-spin"})])):$("",!0),n[4]||(n[4]=l("div",{class:"text-2xl font-medium"},"Live prices",-1)),l("div",de,[(f(!0),x(J,null,K(m(s),d=>(f(),x("div",{class:"flex justify-between items-center",key:d.id},[l("div",ue,T(d.name)+" request ",1),e(ee,{modelValue:d.price,"onUpdate:modelValue":o=>d.price=o,id:`PRICE-FOR-${d.name}-${d.id}`,step:100},null,8,["modelValue","onUpdate:modelValue","id"]),$("",!0)]))),128))]),e(v,{class:"w-full",onClick:t},{default:a(()=>n[3]||(n[3]=[_("Update price")])),_:1})]))}}),ce={class:"fixed left-0 right-0 bg-[#FFEE99] py-2"},me={class:"container flex justify-between items-center"},fe={class:"container py-20"},_e={class:"grid mac:grid-cols-[1fr_auto] items-start gap-4"},ve={class:"max-w-full w-full mac:w-[380px]"},Ee=E({__name:"[id]",setup(g){const p=G(),{data:c,error:s,status:i,refresh:u}=te(`/events/${p.params.id}`),{$repo:{event:t}}=N(),r=C(!1),n=async()=>{var d;try{console.log("here then"),r.value=!0;const o=await t.endEvent(p.params.id);r.value=!1,o.data&&Q("/event-earnings")}catch(o){r.value=!1,z({title:((d=o==null?void 0:o.data)==null?void 0:d.message)??"Failed to end event",variant:"warning"})}};return(d,o)=>{const b=B,D=F;return f(),x("div",null,[l("div",ce,[l("div",me,[e(v,{variant:"outline"},{default:a(()=>o[0]||(o[0]=[_(" 00:45:87")])),_:1}),e(v,{variant:"destructive"},{default:a(()=>o[1]||(o[1]=[_("END EVENT")])),_:1})])]),l("div",fe,[e(b,{to:"/dashboard"}),e(D,{loading:m(i)==="pending",error:m(s)},{default:a(()=>{var y,h;return[l("div",_e,[o[3]||(o[3]=l("div",{class:""},"LIST WILL BE HERE THEN",-1)),l("div",ve,[e(pe,{services:((h=(y=m(c))==null?void 0:y.data)==null?void 0:h.types)??[],onUpdate:m(u)},null,8,["services","onUpdate"]),e(le,{onConfirm:n,message:"Are you sure you want to end this event?"},{default:a(()=>[e(v,{class:"w-full mt-6",variant:"destructive",size:"lg",loading:m(r)},{default:a(()=>o[2]||(o[2]=[_(" END EVENT ")])),_:1},8,["loading"])]),_:1})])])]}),_:1},8,["loading","error"])])])}}});export{Ee as default};
