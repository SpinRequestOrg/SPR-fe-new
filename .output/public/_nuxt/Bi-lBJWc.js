import{_ as ie}from"./CbiDtum7.js";import{a as le}from"./Cjmwphmr.js";import{_ as re}from"./BK_HpqKZ.js";import{_ as de}from"./B_BWyAZL.js";import{_ as z}from"./DQLPMMnl.js";import{_ as ce}from"./DUPnL8Fo.js";import{_ as se}from"./BhOHGwYD.js";import{h as A,i as L,o as d,c as u,a as e,b as r,B as k,m as t,C as I,n as g,t as i,K as ue,a8 as me,j as q,q as x,F as _e,E as pe,k as fe,f as ge,w as f,_ as F,d as R,an as ve}from"./bU2t7sMy.js";import{D as te}from"./ClulDVx8.js";import{_ as xe}from"./BM4eTSzp.js";import{u as ye}from"./C5kKTf1t.js";import{u as he}from"./DO3jfBZY.js";import"./Dm0AIJm0.js";const $e={class:"flex gap-1 items-center"},be={class:"space-y-1"},qe={key:1,class:"flex items-center gap-2 text-base"},ke={class:"text-foreground font-medium"},we={class:"text-muted-foreground"},Ee={class:"flex items-center text-muted-foreground"},Se={class:"flex items-center gap-1 text-primary-foreground"},Fe={class:"text-primary-foreground font-medium"},Re={class:"text-muted-foreground text-sm"},Ie={key:0,class:"text-primary text-sm"},Ne={key:1,class:"text-muted-foreground text-sm"},Be=A({__name:"request-item",props:{type:{default:"song"},request:{}},setup(N){const{authEmail:m}=L(),o=me("size-16 scale-75  shrink-0 rounded-full grid place-items-center",{variants:{type:{song:"bg-[#FFEE99]/10",hype:"bg-[#FF99F1]/10"}},defaultVariants:{type:"song"}});return(l,c)=>{const n=z,_=se;return d(),u("div",$e,[e("div",{class:k(t(o)({type:l.type}))},[r(n,{name:l.type=="song"?"music":"mic",class:k(("cn"in l?l.cn:t(I))(l.request.status==="now-playing"?"animate-bounce":""))},null,8,["name","class"])],2),e("div",be,[l.request.type==="hype"?(d(),g(_,{key:0,content:l.request.description,class:"font-medium"},null,8,["content"])):(d(),u("div",qe,[e("div",ke,i(l.request.song_title),1),e("div",we,"by "+i(l.request.artist),1)])),e("div",Ee,[e("div",Se,[r(n,{name:"money"}),e("div",Fe," â‚¦"+i(("formatMoney"in l?l.formatMoney:t(ue))(l.request.price)),1)]),r(t(te)),e("div",Re,i(l.request.type=="hype"?"HYPE":"SONG"),1),r(t(te)),t(m)===l.request.audience.email?(d(),u("div",Ie," Your request ")):(d(),u("div",Ne," From "+i(l.request.nickname??l.request.audience.name),1))])])])}}}),ze={class:"w-full rounded-xl relative"},Ae={class:"py-4 px-6 bg-[#1C1B1F] rounded-t-[inherit]"},Le={class:"flex items-center gap-4 text-muted-foreground text-sm -ml-1"},Ce={class:"flex items-center gap-px"},Me={class:"flex items-center gap-px"},Te={class:"relative px-6 py-8 bg-white/5 rounded-b-[inherit]"},Ue={class:"space-y-1 grid justify-center text-center mb-8 relative z-[3]"},De={key:1,class:"text-sm text-muted-foreground"},Pe={key:0,class:"p-1 absolute -translate-y-4 left-0 right-0 text-center text-background font-medium text-sm bg-gradient-to-r from-[#844AFF] from-[1.28%] via-[#E991DD] via-[58.26%] to-[#FCF0AF] to-[100%]"},Ve={key:1,class:"space-y-6"},je={key:2,class:"p-3 text-center grid place-items-center"},Oe=A({__name:"request-queue.card",props:{event:{}},setup(N){const m=N,{authEmail:o}=L(),l=q(()=>m.event.requests.sort(n=>n.audience.email===o.value?-1:0).slice(0,3)),c=q(()=>m.event.requests.find(n=>n.status==="now-playing"));return(n,_)=>{var s,a,p,S;const w=z,E=ce,B=Be;return d(),u("div",ze,[e("div",Ae,[_[0]||(_[0]=e("div",{class:"font-display font-semibold text-2xl mb-2"},"Request Queue",-1)),e("div",Le,[e("div",Ce,[r(w,{name:"celebration",class:"relative scale-75"}),e("div",null,i(n.event.title),1)]),e("div",Me,[r(w,{name:"location",class:"relative scale-75"}),e("div",null,i(n.event.address),1)])])]),e("div",Te,[_[1]||(_[1]=e("div",{class:"bg-sp-purple/50 blur-[200px] size-56 absolute left-1/2 -translate-x-1/2"},null,-1)),e("div",Ue,[r(E,{src:"/images/disco.png",class:k(("cn"in n?n.cn:t(I))("size-[120px] mx-auto",t(c)&&"animate-spin"))},null,8,["class"]),t(c)?(d(),g(se,{key:0,class:"font-semibold text-base",content:((s=t(c))==null?void 0:s.type)==="hype"?(a=t(c))==null?void 0:a.description:((p=t(c))==null?void 0:p.song_title)??""},null,8,["content"])):x("",!0),t(c)?(d(),u("div",De," Now "+i(t(c).type==="song"?"playing":"performing hype")+"... ",1)):x("",!0)]),t(c)&&t(o)===t(c).audience.email?(d(),u("div",Pe,i(t(c).type==="hype"?"Performing":"Playing")+" your "+i((S=t(c))==null?void 0:S.type)+" request ",1)):x("",!0),e("div",{class:k(("cn"in n?n.cn:t(I))("text-muted-foreground mb-4",t(c)&&t(o)===t(c).audience.email&&"mt-16"))}," PREVIOUS REQUESTS ",2),t(l).length?(d(),u("div",Ve,[(d(!0),u(_e,null,pe(t(l),y=>(d(),g(B,{key:y.id,request:y,type:y.type},null,8,["request","type"]))),128))])):(d(),u("div",je," No requests yet, hang tight "))])])}}}),Qe={class:"container pt-6 pb-20"},Ye={key:0,class:"grid grid-cols-1 md:grid-cols-[1fr_400px] justify-between gap-6 mt-10"},Ge={class:"grid lg:grid-cols-[auto_1fr] items-start gap-4"},He={class:"py-2"},Je={class:"font-display text-3xl md:text-4xl font-semibold"},Ke={class:"flex flex-wrap gap-4 items-center my-4 mb-6"},We={class:"flex items-center gap-2"},Xe={class:"flex items-center gap-1"},Ze={class:"font-semibold"},et={class:"flex items-center gap-2"},tt={class:"flex items-center gap-1"},st={class:"font-semibold"},at={class:"flex items-center gap-2"},ot={class:"flex items-center gap-1"},nt={class:"font-semibold"},it={class:"flex items-center gap-2"},lt={class:"flex items-center gap-1"},rt={class:"font-semibold"},dt={class:"flex flex-col md:flex-row items-center gap-4"},ct={class:"mt-10 space-y-2 text-muted-foreground hidden md:block"},ut={class:"max-w-[550px]"},mt={class:"inline-flex bg-white/10 items-center rounded-xl py-4 px-6 gap-4"},_t={class:"text-lg font-semibold text-foreground"},pt={class:"mt-4 space-y-4 text-muted-foreground md:hidden"},ft={class:"max-w-[550px]"},gt={class:"inline-flex bg-white/10 items-center rounded-xl py-4 px-6 gap-4"},vt={class:"text-lg font-semibold text-foreground"},Nt=A({__name:"index",setup(N){const m=fe(),{data:o,error:l,status:c}=ye(`/user/host/${m.params.host}`),n=q(()=>{var s,a;return(a=(s=o==null?void 0:o.value)==null?void 0:s.data)==null?void 0:a.user}),{authEmail:_}=L(),w=q(()=>{var s,a,p;return(p=(a=(s=o.value)==null?void 0:s.data)==null?void 0:a.live_event)==null?void 0:p.requests}),E=q(()=>{var s;return(s=w.value)==null?void 0:s.some(a=>a.audience.email===_.value)}),{$config:{public:{APP_BASE_URL:B}}}=ge();return he({title:()=>{var s;return`${(s=n.value)==null?void 0:s.stage_name}`},ogTitle:()=>{var s,a;return`${((s=o.value)==null?void 0:s.data.live_event.title)??""} | ${((a=n.value)==null?void 0:a.stage_name)??""}`},ogDescription:()=>"Make your requests and take spotlight of this event",ogImage:()=>{var s;return`${((s=n.value)==null?void 0:s.profile_picture)??"https://cdn.pixabay.com/photo/2018/05/10/11/34/concert-3387324_1280.jpg"}`},ogImageAlt:()=>"Live Event",ogImageSecureUrl:()=>{var s;return`${((s=n.value)==null?void 0:s.profile_picture)??"https://cdn.pixabay.com/photo/2018/05/10/11/34/concert-3387324_1280.jpg"}`},twitterImage:()=>{var s;return`${((s=n.value)==null?void 0:s.profile_picture)??"https://cdn.pixabay.com/photo/2018/05/10/11/34/concert-3387324_1280.jpg"}`},twitterTitle:()=>{var s,a;return`${((s=o.value)==null?void 0:s.data.live_event.title)??""} | ${((a=n.value)==null?void 0:a.stage_name)??""}`},ogType:"article",ogUrl:()=>{var s;return`${B}/${((s=n.value)==null?void 0:s.slug)??""}`},ogSiteName:"SpinRequest"}),(s,a)=>{var C,M,T,U,D;const p=ie,S=le,y=re,ae=de,v=z,oe=Oe,ne=xe;return d(),u("div",Qe,[(C=t(o))!=null&&C.data.live_event?(d(),g(S,{key:0,class:"-translate-y-6",user:"audience","start-date":(U=(T=(M=t(o))==null?void 0:M.data)==null?void 0:T.live_event)==null?void 0:U.start_date,animate:""},{default:f(()=>{var h,$,b;return[r(p,{to:`/${t(m).params.host}/${(b=($=(h=t(o))==null?void 0:h.data)==null?void 0:$.live_event)==null?void 0:b.id}/make-a-request`},{default:f(()=>[r(F,null,{default:f(()=>[R(" Make "+i(t(E)?"another":"a")+" request ",1)]),_:1})]),_:1},8,["to"])]}),_:1},8,["start-date"])):x("",!0),r(y,{to:"/search",class:k(("cn"in s?s.cn:t(I))((D=t(o))!=null&&D.data.live_event?"mt-10":""))},null,8,["class"]),r(ne,{loading:t(c)==="pending",error:t(l)},{default:f(()=>{var h,$,b,P,V,j,O,Q,Y,G,H,J,K,W,X,Z,ee;return[t(n)?(d(),u("div",Ye,[e("div",null,[e("div",Ge,[r(ae,{class:"!size-[120px] md:!size-[180px] xl:!size-[200px] !rounded-3xl !text-4xl",initials:("getInitials"in s?s.getInitials:t(ve))((h=t(n))==null?void 0:h.stage_name),image:t(n).profile_picture},null,8,["initials","image"]),e("div",He,[e("div",Je,i(t(n).stage_name),1),e("div",Ke,[e("div",We,[r(v,{name:"account_circle"}),e("div",Xe,[e("span",Ze,i((P=(b=($=t(o))==null?void 0:$.data)==null?void 0:b.total_followers)==null?void 0:P.length),1),a[0]||(a[0]=e("span",{class:"text-muted-foreground"},"FOLLOWERS",-1))])]),e("div",et,[r(v,{name:"celebration"}),e("div",tt,[e("span",st,i((V=t(o))==null?void 0:V.data.total_events),1),a[1]||(a[1]=e("span",{class:"text-muted-foreground"},"EVENTS",-1))])]),e("div",at,[r(v,{name:"genres"}),e("div",ot,[e("span",nt,i((j=t(o))==null?void 0:j.data.total_requests),1),a[2]||(a[2]=e("span",{class:"text-muted-foreground"},"REQUESTS",-1))])]),e("div",it,[r(v,{name:"genres"}),e("div",lt,[e("span",rt,i((O=t(o))==null?void 0:O.data.total_fulfilled_requests),1),a[3]||(a[3]=e("span",{class:"text-muted-foreground"},"FUFILLED",-1))])])]),e("div",dt,[r(F,{variant:"secondary",class:"w-full md:w-auto",size:"lg"},{default:f(()=>a[4]||(a[4]=[R(" Follow ")])),_:1}),(Q=t(o))!=null&&Q.data.live_event?(d(),g(p,{key:0,to:`/${t(m).params.host}/${(H=(G=(Y=t(o))==null?void 0:Y.data)==null?void 0:G.live_event)==null?void 0:H.id}/make-a-request`,class:"w-full md:w-auto"},{default:f(()=>[r(F,{size:"lg",class:"w-full"},{default:f(()=>[R(" Make "+i(t(E)?"another":"a")+" request ",1)]),_:1})]),_:1},8,["to"])):(d(),g(F,{key:1,class:"w-full md:w-auto",size:"lg"},{default:f(()=>a[5]||(a[5]=[R(" Notify me when DJ goes live ")])),_:1}))])])]),e("div",ct,[a[7]||(a[7]=e("div",null,"ABOUT ME",-1)),e("div",ut,i(t(n).bio),1),e("div",mt,[r(v,{name:"badge"}),e("div",null,[e("div",_t,i((J=t(o))==null?void 0:J.data.total_fulfilled_requests)+" of "+i((K=t(o))==null?void 0:K.data.total_requests),1),a[6]||(a[6]=e("div",{class:"text-muted-foreground"},"Request fufilled",-1))])])])]),(W=t(o))!=null&&W.data.live_event?(d(),g(oe,{key:0,event:(X=t(o))==null?void 0:X.data.live_event},null,8,["event"])):x("",!0),e("div",pt,[a[9]||(a[9]=e("div",null,"ABOUT ME",-1)),e("div",ft,i(t(n).bio),1),e("div",gt,[r(v,{name:"badge"}),e("div",null,[e("div",vt,i((Z=t(o))==null?void 0:Z.data.total_fulfilled_requests)+" of "+i((ee=t(o))==null?void 0:ee.data.total_requests),1),a[8]||(a[8]=e("div",{class:"text-muted-foreground"},"Request fufilled",-1))])])])])):x("",!0)]}),_:1},8,["loading","error"])])}}});export{Nt as default};
