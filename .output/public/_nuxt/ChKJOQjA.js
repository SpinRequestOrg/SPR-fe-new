import{_ as P}from"./iZtZZNnV.js";import{_ as j}from"./DOZRkeBF.js";import{h as k,o,n as _,w as d,a as c,m as e,b as s,c as R,t as v,q as b,j as w,d as I,O as F,_ as O,k as Q,l as U,r as J,F as T,Q as K,y as W,D as X,P as Y}from"./nPKPItbM.js";import{_ as Z}from"./BvZXc05T.js";import{a as z,_ as S,F as A}from"./BNj9gTV5.js";import{_ as ee}from"./BjLwhkR8.js";import{c as te,b as ae,a as g}from"./DUXXyp4T.js";import{u as D}from"./BF_GBxcm.js";import{u as se}from"./C6pbb5ow.js";import{u as ne}from"./BQfFxr_E.js";import"./DuZ3zr3E.js";import"./Cpj98o6Y.js";const oe=["name","value"],E=k({__name:"form-hidden-input",props:{name:{}},setup(h){return(t,i)=>(o(),_(e(z),{name:t.name,class:"relative h-0 invisible",as:"div"},{default:d(({value:l})=>[c("input",{type:"hidden",name:t.name,value:l},null,8,oe)]),_:1},8,["name"]))}}),re={key:0,class:"text-sm text-destructive animate-in slide-in-from-top-1 absolute -bottom-5 font-semibold"},ie=k({__name:"form-textarea",props:{name:{},label:{},type:{},id:{},placeholder:{},disabled:{type:Boolean},showErrorOnTouch:{type:Boolean,default:!1}},setup(h){return(t,i)=>(o(),_(e(z),{name:t.name,class:"relative",as:"div"},{default:d(({value:l,handleChange:u,errorMessage:p,meta:a})=>[s(ee,{"model-value":l,onChange:u,name:t.name,type:t.type,disabled:t.disabled,placeholder:t.placeholder,id:t.id,label:t.label,state:p&&a.touched?"error":"normal"},null,8,["model-value","onChange","name","type","disabled","placeholder","id","label","state"]),a.touched||t.showErrorOnTouch?(o(),R("div",re,v(p),1)):b("",!0)]),_:1},8,["name"]))}}),G=te({type:ae().oneOf(["hype","song"]).required(),event_id:g().required(),nickname:g().optional()}),le=G.shape({description:g().required("Hype description required"),nickname:g().required("Nickname required")}),ue=G.shape({artist:g().required("Artist name required"),song_title:g().required("Song name required")}),me=k({__name:"hype-request-form",props:{request:{},event_id:{},host_slug:{}},setup(h){const t=h,i=w(()=>({type:t.request.name,event_id:Number(t.event_id)})),{createEventRequest:l,creating:u}=D(),p=a=>{l(a,t.host_slug)};return(a,f)=>(o(),_(e(A),{"validation-schema":e(le),"initial-values":e(i),onSubmit:p,class:"space-y-7"},{default:d(()=>[s(E,{name:"event_id"}),s(E,{name:"type"}),s(ie,{name:"description",placeholder:"Enter hype description",label:"Tell us about your hype",type:"text"}),s(S,{name:"nickname",placeholder:"Enter your nickname",label:"nickname"}),s(O,{type:"submit",size:"lg",class:"max-w-full w-[400px] mx-auto !flex uppercase",loading:e(u)},{default:d(()=>{var r;return[I(" Request Hype For "+v(Number((r=a.request)==null?void 0:r.price)>0?`₦${("formatMoney"in a?a.formatMoney:e(F))(a.request.price)}`:"FREE"),1)]}),_:1},8,["loading"])]),_:1},8,["validation-schema","initial-values"]))}}),de=k({__name:"song-request-form",props:{request:{},event_id:{},host_slug:{}},setup(h){const t=h,i=w(()=>({type:t.request.name,event_id:Number(t.event_id)})),{createEventRequest:l,creating:u}=D(),p=a=>{l(a,t.host_slug)};return(a,f)=>(o(),_(e(A),{"validation-schema":e(ue),"initial-values":e(i),onSubmit:p,class:"space-y-7"},{default:d(()=>[s(E,{name:"event_id"}),s(E,{name:"type"}),s(S,{name:"song_title",placeholder:"Enter song title",label:"Song title",type:"text"}),s(S,{name:"artist",placeholder:"Enter artiste name",label:"Artiste",type:"text"}),s(S,{name:"nickname",placeholder:"Enter your nickname",label:"nickname (optional)"}),s(O,{type:"submit",size:"lg",class:"max-w-full w-[400px] mx-auto !flex uppercase",loading:e(u)},{default:d(()=>{var r;return[I(" Request Song For "+v(Number((r=a.request)==null?void 0:r.price)>0?`₦${("formatMoney"in a?a.formatMoney:e(F))(a.request.price)}`:"FREE"),1)]}),_:1},8,["loading"])]),_:1},8,["validation-schema","initial-values"]))}}),pe={class:"container pt-6 pb-20"},ce={class:"max-w-[640px] w-full mx-auto"},_e={class:"flex items-center gap-x-1"},fe={class:"text-4xl font-bold text-primary tabular-nums"},he={class:"text-2xl font-medium my-4 mb-2 capitalize"},ye={class:"text-muted-foreground"},Be=k({__name:"make-a-request",setup(h){const t=Q(),i=t.params.host,l=t.params.event_id,{data:u,error:p,status:a}=se(`/user/host/${i}`);U(u,m=>{var n,y,x;((x=(y=(n=m==null?void 0:m.data)==null?void 0:n.live_event)==null?void 0:y.types)==null?void 0:x.length)===1&&(f.value=m.data.live_event.types[0].name)});const f=J(""),r=w(()=>{var m,n;return(n=(m=u.value)==null?void 0:m.data.live_event)==null?void 0:n.types.find(y=>y.name===f.value)});return ne({title:"Make A Request"}),(m,n)=>{const y=P,x=j,H=X,L=Y;return o(),R("div",pe,[s(y,{to:`/${e(i)}`},null,8,["to"]),s(Z,{loading:e(a)==="pending",error:e(p)},{default:d(()=>{var B,M,N;return[c("div",ce,[n[1]||(n[1]=c("div",{class:"text-primary text-center text-lg"},"Make a request",-1)),n[2]||(n[2]=c("div",{class:"text-3xl font-semibold text-center font-display mt-2 mb-4"}," Tell me about your request ",-1)),(N=(M=(B=e(u))==null?void 0:B.data)==null?void 0:M.live_event)!=null&&N.types?(o(),_(L,{key:0,class:"grid grid-cols-[repeat(auto-fit,_minmax(305px,_1fr))] gap-6 my-6",modelValue:e(f),"onUpdate:modelValue":n[0]||(n[0]=$=>W(f)?f.value=$:null)},{default:d(()=>{var $,V,C;return[(o(!0),R(T,null,K((C=(V=($=e(u))==null?void 0:$.data)==null?void 0:V.live_event)==null?void 0:C.types,q=>(o(),_(H,{class:"p-6 lg:p-8 mx-auto text-left ring ring-input bg-white/10 rounded-2xl transition-colors cursor-pointer data-[state='checked']:ring-primary hover:ring-primary/30",key:q.id,value:q.name},{default:d(()=>[c("div",_e,[s(x,{name:"money"}),c("div",fe," ₦"+v(("formatMoney"in m?m.formatMoney:e(F))(q.price)),1)]),c("div",he,v(q.name)+" request ",1),c("div",ye,v(q.name==="song"?"Request a song and i'll give you credit when it plays":"Steal the spotlight. Get a shout-out  for yourself or someone."),1)]),_:2},1032,["value"]))),128))]}),_:1},8,["modelValue"])):b("",!0),e(r)?(o(),R(T,{key:1},[e(r).name==="hype"?(o(),_(me,{key:0,request:e(r),event_id:e(l),host_slug:e(i)},null,8,["request","event_id","host_slug"])):b("",!0),e(r).name==="song"?(o(),_(de,{key:1,request:e(r),event_id:e(l),host_slug:e(i)},null,8,["request","event_id","host_slug"])):b("",!0)],64)):b("",!0)])]}),_:1},8,["loading","error"])])}}});export{Be as default};
