import{_ as N}from"./BbCDls9e.js";import{p as v,u as A,q as k,r as C,o as u,z as f,w as i,b as o,y as n,A as L,a as s,t as S,_ as B,s as x,B as E,L as $,c as F,d as y,C as G}from"./BYH92m9P.js";import{_ as R}from"./Ceiwx9J8.js";import{_ as h,F as V}from"./BYhwzVSq.js";import{A as I}from"./h_O2H-HD.js";import"./BqjAheMm.js";const O=v({__name:"audience-signup-form",setup(w){const{$repo:{auth:c}}=A(),{saveAuthUser:a}=k(),t=C(!1),r=async l=>{var d,_,p;t.value=!0;const m={...l,password_confirmation:l.password};try{t.value=!0;const e=await c.registerAudience(m),g=e==null?void 0:e.message;x({title:g,description:"Follow the link in your email to verify your email",variant:"normal",duration:8e4}),t.value=!1,a(e.data.token,e.data.user);const b=((d=e==null?void 0:e.data)==null?void 0:d.role)==="host"?"/profile":"/search";E().push(b)}catch(e){t.value=!1,x({title:"Failed",description:((_=e==null?void 0:e.data)==null?void 0:_.message)??"Sign up failed. Please try again",variant:"warning"}),console.error("ERROR LOGGING IN",(p=e==null?void 0:e.data)==null?void 0:p.message)}};return(l,m)=>(u(),f(n(V),{"validation-schema":n(I),onSubmit:r,class:"space-y-7"},{default:i(()=>[o(h,{name:"email",placeholder:"Enter your email",label:"Email",type:"email"}),o(h,{name:"password",placeholder:"Enter your password",type:"password",label:"Password"}),o(B,{class:"w-full",type:"submit",size:"lg",disabled:n(t)},{default:i(()=>[n(t)?(u(),f(n($),{key:0,class:"animate-spin mr-2"})):L("",!0),s("span",null,S(n(t)?"Please wait...":"Submit"),1)]),_:1},8,["disabled"])]),_:1},8,["validation-schema"]))}}),P={class:"h-full"},z={class:"absolute top-12 left-0"},T={class:"w-full"},q={class:"max-w-full w-[400px] mx-auto"},D={class:"text-center mt-2"},W=v({__name:"audience",setup(w){return(c,a)=>{const t=N,r=G;return u(),F("div",P,[o(r,{name:"auth"},{default:i(()=>[s("div",z,[o(R,{to:"/signup"})]),s("div",T,[a[2]||(a[2]=s("div",{class:"text-primary text-center mb-2 text-xl"}," Create your account ",-1)),a[3]||(a[3]=s("div",{class:"text-4xl lg:text-5xl font-semibold my-4 text-center max-w-[595px] mx-auto font-display"}," Create your free audience account ",-1)),s("div",q,[o(O),s("div",D,[a[1]||(a[1]=y(" Already a user? ")),o(t,{to:"/login",class:"underline hover:no-underline ml-1"},{default:i(()=>a[0]||(a[0]=[y("LOGIN")])),_:1})])])])]),_:1})])}}});export{W as default};
