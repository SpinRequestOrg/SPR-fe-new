import{_ as ie}from"./DuZ3zr3E.js";import{a as le}from"./DAR8oEf1.js";import{_ as re}from"./iZtZZNnV.js";import{_ as de}from"./Cy_720vS.js";import{_ as A}from"./DOZRkeBF.js";import{_ as ce}from"./DW3EN1ie.js";import{_ as se}from"./Co9wB_1n.js";import{h as B,i as L,o as d,c as m,a as e,b as r,R as w,m as t,S as I,n as v,t as i,O as ue,aa as me,j as k,q as y,F as pe,Q as _e,k as fe,f as ge,w as g,_ as F,d as R,a6 as ve}from"./nPKPItbM.js";import{D as te}from"./CKavsnPt.js";import{_ as xe}from"./BvZXc05T.js";import{u as ye}from"./C6pbb5ow.js";import{u as he}from"./BQfFxr_E.js";import"./CPVWBW_m.js";import"./B6DNhza9.js";import"./IAlq6qwQ.js";import"./DoCL3I8U.js";const $e={class:"flex gap-1 items-center"},be={class:"space-y-1"},qe={key:1,class:"flex items-center gap-2 text-base"},ke={class:"text-foreground font-medium"},we={class:"text-muted-foreground"},Ee={class:"flex items-center text-muted-foreground"},Se={class:"flex items-center gap-1 text-primary-foreground"},Fe={class:"text-primary-foreground font-medium"},Re={class:"text-muted-foreground text-sm"},Ie={key:0,class:"text-primary text-sm"},Ne={key:1,class:"text-muted-foreground text-sm"},ze=B({__name:"request-item",props:{type:{default:"song"},request:{}},setup(N){const{authEmail:_}=L(),o=me("size-16 scale-75  shrink-0 rounded-full grid place-items-center",{variants:{type:{song:"bg-[#FFEE99]/10",hype:"bg-[#FF99F1]/10"}},defaultVariants:{type:"song"}});return(l,c)=>{const n=A,f=se;return d(),m("div",$e,[e("div",{class:w(t(o)({type:l.type}))},[r(n,{name:l.type=="song"?"music":"mic",class:w(("cn"in l?l.cn:t(I))(l.request.status==="now-playing"?"animate-bounce":""))},null,8,["name","class"])],2),e("div",be,[l.request.type==="hype"?(d(),v(f,{key:0,content:l.request.description,class:"font-medium"},null,8,["content"])):(d(),m("div",qe,[e("div",ke,i(l.request.song_title),1),e("div",we,"by "+i(l.request.artist),1)])),e("div",Ee,[e("div",Se,[r(n,{name:"money"}),e("div",Fe," â‚¦"+i(("formatMoney"in l?l.formatMoney:t(ue))(l.request.price)),1)]),r(t(te)),e("div",Re,i(l.request.type=="hype"?"HYPE":"SONG"),1),r(t(te)),t(_)===l.request.audience.email?(d(),m("div",Ie," Your request ")):(d(),m("div",Ne," From "+i(l.request.nickname??l.request.audience.name),1))])])])}}}),Ae={class:"w-full rounded-xl relative"},Be={class:"py-4 px-6 bg-[#1C1B1F] rounded-t-[inherit]"},Le={class:"flex items-center gap-4 text-muted-foreground text-sm -ml-1"},Me={class:"flex items-center gap-px"},Te={class:"flex items-center gap-px"},Ue={class:"relative px-6 py-8 bg-white/5 rounded-b-[inherit]"},Ce={class:"space-y-1 grid justify-center text-center mb-8 relative z-[3]"},De={key:1,class:"text-sm text-muted-foreground"},Oe={key:0,class:"p-1 absolute -translate-y-4 left-0 right-0 text-center text-background font-medium text-sm bg-gradient-to-r from-[#844AFF] from-[1.28%] via-[#E991DD] via-[58.26%] to-[#FCF0AF] to-[100%]"},Pe={key:1,class:"space-y-6"},Ve={key:2,class:"p-3 text-center grid place-items-center"},je=B({__name:"request-queue.card",props:{event:{}},setup(N){const _=N,{authEmail:o}=L(),l=k(()=>_.event.requests.sort(n=>n.audience.email===o.value?-1:0).slice(0,3)),c=k(()=>_.event.requests.find(n=>n.status==="now-playing"));return(n,f)=>{var s,a,u,p;const E=A,S=ce,z=ze;return d(),m("div",Ae,[e("div",Be,[f[0]||(f[0]=e("div",{class:"font-display font-semibold text-2xl mb-2"},"Request Queue",-1)),e("div",Le,[e("div",Me,[r(E,{name:"celebration",class:"relative scale-75"}),e("div",null,i(n.event.title),1)]),e("div",Te,[r(E,{name:"location",class:"relative scale-75"}),e("div",null,i(n.event.address),1)])])]),e("div",Ue,[f[1]||(f[1]=e("div",{class:"bg-sp-purple/50 blur-[200px] size-56 absolute left-1/2 -translate-x-1/2"},null,-1)),e("div",Ce,[r(S,{src:"/images/disco.png",class:w(("cn"in n?n.cn:t(I))("size-[120px] mx-auto",t(c)&&"animate-spin"))},null,8,["class"]),t(c)?(d(),v(se,{key:0,class:"font-semibold text-base",content:((s=t(c))==null?void 0:s.type)==="hype"?(a=t(c))==null?void 0:a.description:((u=t(c))==null?void 0:u.song_title)??""},null,8,["content"])):y("",!0),t(c)?(d(),m("div",De," Now "+i(t(c).type==="song"?"playing":"performing hype")+"... ",1)):y("",!0)]),t(c)&&t(o)===t(c).audience.email?(d(),m("div",Oe,i(t(c).type==="hype"?"Performing":"Playing")+" your "+i((p=t(c))==null?void 0:p.type)+" request ",1)):y("",!0),e("div",{class:w(("cn"in n?n.cn:t(I))("text-muted-foreground mb-4",t(c)&&t(o)===t(c).audience.email&&"mt-16"))}," PREVIOUS REQUESTS ",2),t(l).length?(d(),m("div",Pe,[(d(!0),m(pe,null,_e(t(l),h=>(d(),v(z,{key:h.id,request:h,type:h.type},null,8,["request","type"]))),128))])):(d(),m("div",Ve," No requests yet, hang tight "))])])}}}),Qe={class:"container pt-6 pb-20"},Ye={key:0,class:"grid grid-cols-1 md:grid-cols-[1fr_400px] justify-between gap-6 mt-10"},Ge={class:"grid lg:grid-cols-[auto_1fr] items-start gap-4"},He={class:"py-2"},Je={class:"font-display text-3xl md:text-4xl font-semibold"},We={class:"flex flex-wrap gap-4 items-center my-4 mb-6"},Ke={class:"flex items-center gap-2"},Xe={class:"flex items-center gap-1"},Ze={class:"font-semibold"},et={class:"flex items-center gap-2"},tt={class:"flex items-center gap-1"},st={class:"font-semibold"},at={class:"flex items-center gap-2"},ot={class:"flex items-center gap-1"},nt={class:"font-semibold"},it={class:"flex items-center gap-2"},lt={class:"flex items-center gap-1"},rt={class:"font-semibold"},dt={class:"flex flex-col md:flex-row items-center gap-4"},ct={class:"mt-10 space-y-2 text-muted-foreground hidden md:block"},ut={class:"max-w-[550px]"},mt={class:"inline-flex bg-white/10 items-center rounded-xl py-4 px-6 gap-4"},pt={class:"text-lg font-semibold text-foreground"},_t={class:"mt-4 space-y-4 text-muted-foreground md:hidden"},ft={class:"max-w-[550px]"},gt={class:"inline-flex bg-white/10 items-center rounded-xl py-4 px-6 gap-4"},vt={class:"text-lg font-semibold text-foreground"},Bt=B({__name:"index",setup(N){const _=fe(),{data:o,error:l,status:c}=ye(`/user/host/${_.params.host}`),n=k(()=>{var s,a;return(a=(s=o==null?void 0:o.value)==null?void 0:s.data)==null?void 0:a.user}),{authEmail:f}=L(),E=k(()=>{var s,a,u;return(u=(a=(s=o.value)==null?void 0:s.data)==null?void 0:a.live_event)==null?void 0:u.requests}),S=k(()=>{var s;return(s=E.value)==null?void 0:s.some(a=>a.audience.email===f.value)}),{$config:{public:{APP_BASE_URL:z}}}=ge();return he({title:()=>{var s;return`${(s=n.value)==null?void 0:s.stage_name}`},ogTitle:()=>{var s,a,u,p;return`${((u=(a=(s=o.value)==null?void 0:s.data)==null?void 0:a.live_event)==null?void 0:u.title)??""} | ${((p=n.value)==null?void 0:p.stage_name)??""}`},ogDescription:()=>"Make your requests and take spotlight of this event",ogImage:()=>{var s;return`${((s=n.value)==null?void 0:s.profile_picture)??"https://cdn.pixabay.com/photo/2018/05/10/11/34/concert-3387324_1280.jpg"}`},ogImageAlt:()=>"Live Event",ogImageSecureUrl:()=>{var s;return`${((s=n.value)==null?void 0:s.profile_picture)??"https://cdn.pixabay.com/photo/2018/05/10/11/34/concert-3387324_1280.jpg"}`},twitterImage:()=>{var s;return`${((s=n.value)==null?void 0:s.profile_picture)??"https://cdn.pixabay.com/photo/2018/05/10/11/34/concert-3387324_1280.jpg"}`},twitterTitle:()=>{var s,a,u,p;return`${((u=(a=(s=o.value)==null?void 0:s.data)==null?void 0:a.live_event)==null?void 0:u.title)??""} | ${((p=n.value)==null?void 0:p.stage_name)??""}`},ogType:"article",ogUrl:()=>{var s;return`${z}/${((s=n.value)==null?void 0:s.slug)??""}`},ogSiteName:"SpinRequest"}),(s,a)=>{var M,T,U,C,D;const u=ie,p=le,h=re,ae=de,x=A,oe=je,ne=xe;return d(),m("div",Qe,[(M=t(o))!=null&&M.data.live_event?(d(),v(p,{key:0,class:"-translate-y-6",user:"audience","start-date":(C=(U=(T=t(o))==null?void 0:T.data)==null?void 0:U.live_event)==null?void 0:C.start_date,animate:""},{default:g(()=>{var $,b,q;return[r(u,{to:`/${t(_).params.host}/${(q=(b=($=t(o))==null?void 0:$.data)==null?void 0:b.live_event)==null?void 0:q.id}/make-a-request`},{default:g(()=>[r(F,null,{default:g(()=>[R(" Make "+i(t(S)?"another":"a")+" request ",1)]),_:1})]),_:1},8,["to"])]}),_:1},8,["start-date"])):y("",!0),r(h,{to:"/search",class:w(("cn"in s?s.cn:t(I))((D=t(o))!=null&&D.data.live_event?"mt-10":""))},null,8,["class"]),r(ne,{loading:t(c)==="pending",error:t(l)},{default:g(()=>{var $,b,q,O,P,V,j,Q,Y,G,H,J,W,K,X,Z,ee;return[t(n)?(d(),m("div",Ye,[e("div",null,[e("div",Ge,[r(ae,{class:"!size-[120px] md:!size-[180px] xl:!size-[200px] !rounded-3xl !text-4xl",initials:("getInitials"in s?s.getInitials:t(ve))(($=t(n))==null?void 0:$.stage_name),image:t(n).profile_picture},null,8,["initials","image"]),e("div",He,[e("div",Je,i(t(n).stage_name),1),e("div",We,[e("div",Ke,[r(x,{name:"account_circle"}),e("div",Xe,[e("span",Ze,i((O=(q=(b=t(o))==null?void 0:b.data)==null?void 0:q.total_followers)==null?void 0:O.length),1),a[0]||(a[0]=e("span",{class:"text-muted-foreground"},"FOLLOWERS",-1))])]),e("div",et,[r(x,{name:"celebration"}),e("div",tt,[e("span",st,i((P=t(o))==null?void 0:P.data.total_events),1),a[1]||(a[1]=e("span",{class:"text-muted-foreground"},"EVENTS",-1))])]),e("div",at,[r(x,{name:"genres"}),e("div",ot,[e("span",nt,i((V=t(o))==null?void 0:V.data.total_requests),1),a[2]||(a[2]=e("span",{class:"text-muted-foreground"},"REQUESTS",-1))])]),e("div",it,[r(x,{name:"genres"}),e("div",lt,[e("span",rt,i((j=t(o))==null?void 0:j.data.total_fulfilled_requests),1),a[3]||(a[3]=e("span",{class:"text-muted-foreground"},"FUFILLED",-1))])])]),e("div",dt,[r(F,{variant:"secondary",class:"w-full md:w-auto",size:"lg"},{default:g(()=>a[4]||(a[4]=[R(" Follow ")])),_:1}),(Q=t(o))!=null&&Q.data.live_event?(d(),v(u,{key:0,to:`/${t(_).params.host}/${(H=(G=(Y=t(o))==null?void 0:Y.data)==null?void 0:G.live_event)==null?void 0:H.id}/make-a-request`,class:"w-full md:w-auto"},{default:g(()=>[r(F,{size:"lg",class:"w-full"},{default:g(()=>[R(" Make "+i(t(S)?"another":"a")+" request ",1)]),_:1})]),_:1},8,["to"])):(d(),v(F,{key:1,class:"w-full md:w-auto",size:"lg"},{default:g(()=>a[5]||(a[5]=[R(" Notify me when DJ goes live ")])),_:1}))])])]),e("div",ct,[a[7]||(a[7]=e("div",null,"ABOUT ME",-1)),e("div",ut,i(t(n).bio),1),e("div",mt,[r(x,{name:"badge"}),e("div",null,[e("div",pt,i((J=t(o))==null?void 0:J.data.total_fulfilled_requests)+" of "+i((W=t(o))==null?void 0:W.data.total_requests),1),a[6]||(a[6]=e("div",{class:"text-muted-foreground"},"Request fufilled",-1))])])])]),(K=t(o))!=null&&K.data.live_event?(d(),v(oe,{key:0,event:(X=t(o))==null?void 0:X.data.live_event},null,8,["event"])):y("",!0),e("div",_t,[a[9]||(a[9]=e("div",null,"ABOUT ME",-1)),e("div",ft,i(t(n).bio),1),e("div",gt,[r(x,{name:"badge"}),e("div",null,[e("div",vt,i((Z=t(o))==null?void 0:Z.data.total_fulfilled_requests)+" of "+i((ee=t(o))==null?void 0:ee.data.total_requests),1),a[8]||(a[8]=e("div",{class:"text-muted-foreground"},"Request fufilled",-1))])])])])):y("",!0)]}),_:1},8,["loading","error"])])}}});export{Bt as default};
