import{_ as se}from"./oBTpqreC.js";import{_ as ae}from"./NcXXvixd.js";import{_ as oe}from"./y5m9Atok.js";import{_ as ne}from"./B4ns7hig.js";import{_ as ie}from"./CmrMhK7Z.js";import{h as X,i as Y,j as b,o as _,c as y,a as e,F as le,E as de,t as i,n as a,v as q,k as re,f as ue,m as ce,p as $,w as m,b as r,G as _e,_ as w,d as k,H as me,Q as pe}from"./DDutlV_8.js";import{_ as fe}from"./CzNM3mkv.js";import{u as ve}from"./DZSzxMxr.js";import"./tH0klCFX.js";import"./CS-l2cgK.js";import"./DKx0YSRY.js";import"./B-wh-tzx.js";import"./DyEh32yW.js";const ge={key:0,class:"w-full rounded-xl relative"},xe={class:"border p-20 bg-white/5 grid place-items-center"},he=X({__name:"request-queue.card",props:{event:{}},setup(S){const l=S,{authEmail:o}=Y(),E=b(()=>{var c,n;return(c=l==null?void 0:l.event)!=null&&c.requests?(n=l==null?void 0:l.event)==null?void 0:n.requests.sort(d=>{var v;return((v=d==null?void 0:d.audience)==null?void 0:v.email)===(o==null?void 0:o.value)?-1:0}).slice(0,3):[]});return b(()=>{var c,n;return(n=(c=l==null?void 0:l.event)==null?void 0:c.requests)==null?void 0:n.find(d=>(d==null?void 0:d.status)==="now-playing")}),(c,n)=>c.event?(_(),y("div",ge,[e("div",xe,[(_(!0),y(le,null,de(a(E),(d,v)=>(_(),y("div",{key:d.id},i(d.song_title??d.description),1))),128))])])):q("",!0)}}),be={class:"container pt-6 pb-20"},ye={key:0,class:"grid grid-cols-1 md:grid-cols-[1fr_400px] justify-between gap-6 mt-10"},$e={class:"grid lg:grid-cols-[auto_1fr] items-start gap-4"},we={class:"py-2"},ke={class:"font-display text-3xl md:text-4xl font-semibold"},qe={class:"flex flex-wrap gap-4 items-center my-4 mb-6"},Ee={class:"flex items-center gap-2"},Se={class:"flex items-center gap-1"},Be={class:"font-semibold"},Le={class:"flex items-center gap-2"},Re={class:"flex items-center gap-1"},Ie={class:"font-semibold"},Ne={class:"flex items-center gap-2"},Ae={class:"flex items-center gap-1"},Te={class:"font-semibold"},ze={class:"flex items-center gap-2"},Fe={class:"flex items-center gap-1"},Ue={class:"font-semibold"},Me={class:"flex flex-col md:flex-row items-center gap-4"},je={class:"mt-10 space-y-2 text-muted-foreground hidden md:block"},Ce={class:"max-w-[550px]"},Ve={class:"inline-flex bg-white/10 items-center rounded-xl py-4 px-6 gap-4"},De={class:"text-lg font-semibold text-foreground"},Oe={class:"mt-4 space-y-4 text-muted-foreground md:hidden"},Pe={class:"max-w-[550px]"},Qe={class:"inline-flex bg-white/10 items-center rounded-xl py-4 px-6 gap-4"},Ge={class:"text-lg font-semibold text-foreground"},it=X({__name:"index",setup(S){const l=re(),{data:o,error:E,status:c}=ve(`/user/host/${l.params.host}`),n=b(()=>{var t,s;return(s=(t=o==null?void 0:o.value)==null?void 0:t.data)==null?void 0:s.user}),{authEmail:d}=Y(),v=b(()=>{var t,s,u;return(u=(s=(t=o.value)==null?void 0:t.data)==null?void 0:s.live_event)==null?void 0:u.requests}),B=b(()=>{var t;return(t=v.value)==null?void 0:t.some(s=>s.audience.email===d.value)}),{$config:{public:{APP_BASE_URL:Z}}}=ue();return ce({title:()=>{var t;return`${((t=n==null?void 0:n.value)==null?void 0:t.stage_name)??""}`},ogTitle:()=>{var t,s,u,p;return`${((u=(s=(t=o.value)==null?void 0:t.data)==null?void 0:s.live_event)==null?void 0:u.title)??""} | ${((p=n.value)==null?void 0:p.stage_name)??""}`},ogDescription:()=>"Make your requests and take spotlight of this event",ogImage:()=>{var t;return`${((t=n.value)==null?void 0:t.profile_picture)??"https://cdn.pixabay.com/photo/2018/05/10/11/34/concert-3387324_1280.jpg"}`},ogImageAlt:()=>"Live Event",ogImageSecureUrl:()=>{var t;return`${((t=n.value)==null?void 0:t.profile_picture)??"https://cdn.pixabay.com/photo/2018/05/10/11/34/concert-3387324_1280.jpg"}`},twitterImage:()=>{var t;return`${((t=n.value)==null?void 0:t.profile_picture)??"https://cdn.pixabay.com/photo/2018/05/10/11/34/concert-3387324_1280.jpg"}`},twitterTitle:()=>{var t,s,u,p;return`${((u=(s=(t=o.value)==null?void 0:t.data)==null?void 0:s.live_event)==null?void 0:u.title)??""} | ${((p=n.value)==null?void 0:p.stage_name)??""}`},ogType:"article",ogUrl:()=>{var t;return`${Z}/${((t=n.value)==null?void 0:t.slug)??""}`},ogSiteName:"SpinRequest"}),(t,s)=>{var L,R,I,N,A;const u=se,p=ae,ee=oe,f=ne,te=ie;return _(),y("div",be,[(L=a(o))!=null&&L.data.live_event?(_(),$(p,{key:0,class:"-translate-y-6",user:"audience","start-date":(N=(I=(R=a(o))==null?void 0:R.data)==null?void 0:I.live_event)==null?void 0:N.start_date,animate:""},{default:m(()=>{var g,x,h;return[r(u,{to:`/${a(l).params.host}/${(h=(x=(g=a(o))==null?void 0:g.data)==null?void 0:x.live_event)==null?void 0:h.id}/make-a-request`},{default:m(()=>[r(w,null,{default:m(()=>[k("Make "+i(a(B)?"another":"a")+" request",1)]),_:1})]),_:1},8,["to"])]}),_:1},8,["start-date"])):q("",!0),r(ee,{to:"/audience",class:_e(("cn"in t?t.cn:a(me))((A=a(o))!=null&&A.data.live_event?"mt-10":""))},null,8,["class"]),r(te,{loading:a(c)==="pending",error:a(E)},{default:m(()=>{var g,x,h,T,z,F,U,M,j,C,V,D,O,P,Q,G,H,J,W,K;return[a(n)?(_(),y("div",ye,[e("div",null,[e("div",$e,[r(fe,{class:"!size-[120px] md:!size-[180px] xl:!size-[200px] !rounded-3xl !text-4xl",initials:("getInitials"in t?t.getInitials:a(pe))((g=a(n))==null?void 0:g.stage_name),image:a(n).profile_picture},null,8,["initials","image"]),e("div",we,[e("div",ke,i((x=a(n))==null?void 0:x.stage_name),1),e("div",qe,[e("div",Ee,[r(f,{name:"account_circle"}),e("div",Se,[e("span",Be,i((z=(T=(h=a(o))==null?void 0:h.data)==null?void 0:T.total_followers)==null?void 0:z.length),1),s[0]||(s[0]=e("span",{class:"text-muted-foreground"},"FOLLOWERS",-1))])]),e("div",Le,[r(f,{name:"celebration"}),e("div",Re,[e("span",Ie,i((F=a(o))==null?void 0:F.data.total_events),1),s[1]||(s[1]=e("span",{class:"text-muted-foreground"},"EVENTS",-1))])]),e("div",Ne,[r(f,{name:"genres"}),e("div",Ae,[e("span",Te,i((U=a(o))==null?void 0:U.data.total_requests),1),s[2]||(s[2]=e("span",{class:"text-muted-foreground"},"REQUESTS",-1))])]),e("div",ze,[r(f,{name:"genres"}),e("div",Fe,[e("span",Ue,i((M=a(o))==null?void 0:M.data.total_fulfilled_requests),1),s[3]||(s[3]=e("span",{class:"text-muted-foreground"},"FUFILLED",-1))])])]),e("div",Me,[r(w,{variant:"secondary",class:"w-full md:w-auto",size:"lg"},{default:m(()=>s[4]||(s[4]=[k(" Follow ")])),_:1}),(j=a(o))!=null&&j.data.live_event?(_(),$(u,{key:0,to:`/${a(l).params.host}/${(D=(V=(C=a(o))==null?void 0:C.data)==null?void 0:V.live_event)==null?void 0:D.id}/make-a-request`,class:"w-full md:w-auto"},{default:m(()=>[r(w,{size:"lg",class:"w-full"},{default:m(()=>[k(" Make "+i(a(B)?"another":"a")+" request ",1)]),_:1})]),_:1},8,["to"])):(_(),$(w,{key:1,class:"w-full md:w-auto",size:"lg"},{default:m(()=>s[5]||(s[5]=[k(" Notify me when DJ goes live ")])),_:1}))])])]),e("div",je,[s[7]||(s[7]=e("div",null,"ABOUT ME",-1)),e("div",Ce,i(a(n).bio),1),e("div",Ve,[r(f,{name:"badge"}),e("div",null,[e("div",De,i((O=a(o))==null?void 0:O.data.total_fulfilled_requests)+" of "+i((P=a(o))==null?void 0:P.data.total_requests),1),s[6]||(s[6]=e("div",{class:"text-muted-foreground"},"Request fufilled",-1))])])])]),(G=(Q=a(o))==null?void 0:Q.data)!=null&&G.live_event?(_(),$(he,{key:0,event:(J=(H=a(o))==null?void 0:H.data)==null?void 0:J.live_event},null,8,["event"])):q("",!0),e("div",Oe,[s[9]||(s[9]=e("div",null,"ABOUT ME",-1)),e("div",Pe,i(a(n).bio),1),e("div",Qe,[r(f,{name:"badge"}),e("div",null,[e("div",Ge,i((W=a(o))==null?void 0:W.data.total_fulfilled_requests)+" of "+i((K=a(o))==null?void 0:K.data.total_requests),1),s[8]||(s[8]=e("div",{class:"text-muted-foreground"},"Request fufilled",-1))])])])])):q("",!0)]}),_:1},8,["loading","error"])])}}});export{it as default};
